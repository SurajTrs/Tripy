(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[408],{2684:(e,s,a)=>{Promise.resolve().then(a.bind(a,8666))},8666:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>c});var t=a(5155),l=a(2115),r=a(6046),i=a(8173),n=a.n(i);function c(){(0,r.useRouter)();let e=(0,r.useSearchParams)().get("session_id"),[s,a]=(0,l.useState)(!0),[i,c]=(0,l.useState)(null),[d,o]=(0,l.useState)(null);return(0,l.useEffect)(()=>{if(!e){o("No session ID provided"),a(!1);return}(async function(){try{let s=await fetch("/api/stripe/session?session_id=".concat(e)),a=await s.json();a.success&&a.session?c(a.session):o(a.message||"Failed to retrieve booking details")}catch(e){o(e.message||"An error occurred while fetching booking details")}finally{a(!1)}})()},[e]),(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"max-w-2xl w-full bg-white rounded-xl shadow-lg overflow-hidden",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 p-6 text-white",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Booking Successful!"}),(0,t.jsx)("p",{className:"opacity-90 mt-1",children:"Thank you for booking your trip with Tripy"})]}),(0,t.jsx)("div",{className:"p-6",children:s?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-8",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading your booking details..."})]}):d?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"text-red-500 text-xl mb-4",children:"❌ Error"}),(0,t.jsx)("p",{className:"text-gray-700",children:d}),(0,t.jsx)(n(),{href:"/",className:"mt-6 inline-block px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Return Home"})]}):i?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,t.jsx)("div",{className:"bg-green-100 rounded-full p-3",children:(0,t.jsx)("svg",{className:"h-8 w-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),(0,t.jsxs)("div",{className:"border-b pb-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Booking Details"}),(0,t.jsxs)("div",{className:"mt-3 grid grid-cols-1 gap-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Booking ID:"}),(0,t.jsx)("span",{className:"font-medium",children:i.metadata.tripId})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Status:"}),(0,t.jsx)("span",{className:"font-medium text-green-600",children:"Confirmed"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Total Amount:"}),(0,t.jsxs)("span",{className:"font-medium",children:["₹",(i.amount_total/100).toLocaleString()]})]})]})]}),(0,t.jsxs)("div",{className:"border-b pb-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Trip Details"}),(0,t.jsxs)("div",{className:"mt-3 grid grid-cols-1 gap-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Transport Type:"}),(0,t.jsx)("span",{className:"font-medium",children:i.metadata.transportType.toUpperCase()})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"From:"}),(0,t.jsx)("span",{className:"font-medium",children:i.metadata.origin})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"To:"}),(0,t.jsx)("span",{className:"font-medium",children:i.metadata.destination})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Departure Date:"}),(0,t.jsx)("span",{className:"font-medium",children:i.metadata.departureDate})]}),i.metadata.returnDate&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Return Date:"}),(0,t.jsx)("span",{className:"font-medium",children:i.metadata.returnDate})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Group Size:"}),(0,t.jsx)("span",{className:"font-medium",children:i.metadata.groupSize})]})]})]}),(0,t.jsxs)("div",{className:"border-b pb-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Customer Details"}),(0,t.jsxs)("div",{className:"mt-3 grid grid-cols-1 gap-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Name:"}),(0,t.jsx)("span",{className:"font-medium",children:i.customer_details.name})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Email:"}),(0,t.jsx)("span",{className:"font-medium",children:i.customer_details.email})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 pt-2",children:[(0,t.jsx)(n(),{href:"/",className:"flex-1 px-6 py-3 bg-purple-600 text-white text-center rounded-lg hover:bg-purple-700 transition-colors",children:"Return Home"}),(0,t.jsxs)("button",{onClick:()=>window.print(),className:"flex-1 px-6 py-3 bg-gray-200 text-gray-800 text-center rounded-lg hover:bg-gray-300 transition-colors flex items-center justify-center gap-2",children:[(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Print Receipt"]})]})]}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("p",{className:"text-gray-700",children:"No booking details found"}),(0,t.jsx)(n(),{href:"/",className:"mt-6 inline-block px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Return Home"})]})})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[28,441,517,358],()=>s(2684)),_N_E=e.O()}]);