(()=>{var e={};e.id=136,e.ids=[136,173],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},6810:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>m,routeModule:()=>l,serverHooks:()=>h,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>c});var o={};t.r(o),t.d(o,{POST:()=>p});var a=t(2706),s=t(8203),n=t(5994),i=t(9187),u=t(5173);async function p(e){try{let{busId:r,passengers:t,userDetails:o}=await e.json();if(!r||!t||!o)return i.NextResponse.json({success:!1,message:"Missing required fields"},{status:400});let a=await (0,u.i)(r,o,t);return i.NextResponse.json({success:!0,message:"Bus booked successfully",booking:a})}catch(e){return console.error("Bus booking error:",e),i.NextResponse.json({success:!1,message:e.message||"Failed to book bus"},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/book-trip/bus/route",pathname:"/api/book-trip/bus",filename:"route",bundlePath:"app/api/book-trip/bus/route"},resolvedPagePath:"/Users/surajrawat/Downloads/Tripy/app/api/book-trip/bus/route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:d,workUnitAsyncStorage:c,serverHooks:h}=l;function m(){return(0,n.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:c})}},6487:()=>{},8335:()=>{},5173:(e,r,t)=>{"use strict";async function o(e){if(!process.env.RAPIDAPI_KEY)throw Error("Bus API credentials are not configured.");try{return function(e,r,t,o){let a=[],s=["RedBus Express","AbhiBus Travels","eTravelSmart","Travelyaari","TicketGoose","KSRTC","MSRTC","GSRTC","TNSTC","UPSRTC"],n=["Volvo A/C Sleeper","Mercedes Multi-Axle","Volvo A/C Seater","Non A/C Sleeper","Non A/C Seater","Deluxe","Super Deluxe","Ultra Deluxe","Semi Sleeper"],i=["WiFi","Charging Point","Water Bottle","Blanket","Reading Light","Snacks","TV","Emergency Exit","CCTV"],u=5+Math.floor(6*Math.random());for(let o=0;o<u;o++){let u=6+Math.floor(18*Math.random()),p=Math.floor(60*Math.random()),l=`${u.toString().padStart(2,"0")}:${p.toString().padStart(2,"0")}`,d=3+Math.floor(10*Math.random()),c=Math.floor(60*Math.random()),h=(u+d)%24,m=(p+c)%60,g=`${h.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}`,f=500+Math.floor(2e3*Math.random()),M=s[Math.floor(Math.random()*s.length)],S=n[Math.floor(Math.random()*n.length)],b=2+Math.floor(4*Math.random()),x=[];for(let e=0;e<b;e++){let e=i[Math.floor(Math.random()*i.length)];x.includes(e)||x.push(e)}let k=5+Math.floor(36*Math.random()),v=(3+2*Math.random()).toFixed(1);a.push({id:`BUS-${Date.now()}-${o}`,operator:M,busType:S,departureTime:l,arrivalTime:g,duration:`${d}h ${c}m`,price:f,currency:"INR",departureCity:e,arrivalCity:r,departureDate:t,availableSeats:k,amenities:x,rating:parseFloat(v),deeplink:`https://example.com/book-bus/${M.toLowerCase().replace(/\s+/g,"-")}/${t}/${e.toLowerCase()}-${r.toLowerCase()}`})}return a.sort((e,r)=>e.price-r.price)}(e.origin,e.destination,e.departureDate,e.passengers)}catch(e){throw console.error("Bus API Error:",e),Error(`Failed to fetch bus data: ${e.message}`)}}async function a(e,r,t,o=!1){let s="string"==typeof e?e:e.id;if(await new Promise(e=>setTimeout(e,1500+1e3*Math.random())),!(Math.random()>.1))throw Error(`${o?"Return bus":"Bus"} booking failed - no seats available`);return{type:"bus",isReturn:o,bookingId:`BUS-${o?"RET-":""}${Date.now()}-${Math.random().toString(36).substring(2,8).toUpperCase()}`,pnr:`PNR${Math.random().toString(36).substring(2,8).toUpperCase()}`,status:"confirmed",busId:s,passengers:t,totalAmount:"object"==typeof e?e.price*t:0}}t.d(r,{i:()=>a,searchBuses:()=>o})}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[994,452],()=>t(6810));module.exports=o})();