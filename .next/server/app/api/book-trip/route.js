/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/book-trip/route";
exports.ids = ["app/api/book-trip/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fbook-trip%2Froute&page=%2Fapi%2Fbook-trip%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbook-trip%2Froute.ts&appDir=%2FUsers%2Fsurajrawat%2FDownloads%2FTripy%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsurajrawat%2FDownloads%2FTripy&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=export&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fbook-trip%2Froute&page=%2Fapi%2Fbook-trip%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbook-trip%2Froute.ts&appDir=%2FUsers%2Fsurajrawat%2FDownloads%2FTripy%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsurajrawat%2FDownloads%2FTripy&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=export&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_surajrawat_Downloads_Tripy_app_api_book_trip_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/book-trip/route.ts */ \"(rsc)/./app/api/book-trip/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"export\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/book-trip/route\",\n        pathname: \"/api/book-trip\",\n        filename: \"route\",\n        bundlePath: \"app/api/book-trip/route\"\n    },\n    resolvedPagePath: \"/Users/surajrawat/Downloads/Tripy/app/api/book-trip/route.ts\",\n    nextConfigOutput,\n    userland: _Users_surajrawat_Downloads_Tripy_app_api_book_trip_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZib29rLXRyaXAlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmJvb2stdHJpcCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmJvb2stdHJpcCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnN1cmFqcmF3YXQlMkZEb3dubG9hZHMlMkZUcmlweSUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZzdXJhanJhd2F0JTJGRG93bmxvYWRzJTJGVHJpcHkmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9ZXhwb3J0JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ1k7QUFDekY7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBc0Q7QUFDOUQ7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDMEY7O0FBRTFGIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9zdXJhanJhd2F0L0Rvd25sb2Fkcy9UcmlweS9hcHAvYXBpL2Jvb2stdHJpcC9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJleHBvcnRcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYm9vay10cmlwL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYm9vay10cmlwXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9ib29rLXRyaXAvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvc3VyYWpyYXdhdC9Eb3dubG9hZHMvVHJpcHkvYXBwL2FwaS9ib29rLXRyaXAvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fbook-trip%2Froute&page=%2Fapi%2Fbook-trip%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbook-trip%2Froute.ts&appDir=%2FUsers%2Fsurajrawat%2FDownloads%2FTripy%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsurajrawat%2FDownloads%2FTripy&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=export&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./app/api/book-trip/route.ts":
/*!************************************!*\
  !*** ./app/api/book-trip/route.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_nlpParser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/nlpParser */ \"(rsc)/./lib/nlpParser.ts\");\n/* harmony import */ var _lib_location__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/location */ \"(rsc)/./lib/location.ts\");\n// api/trip/route.ts\n\n\n // Assuming this file exists and works as expected\n// Questions to ask the user for missing trip details\nconst QUESTIONS = {\n    from: 'Kahan se start karna hai? (Origin city)',\n    to: 'Kahan jana hai? (Destination city)',\n    date: 'Travel ki date kya hai? (e.g. 18 August 2025)',\n    budget: 'Aapka budget preference kya hai? Luxury, Medium, ya Budget-friendly?',\n    groupSize: 'Solo ja rahe ho ya group mein?',\n    mode: 'Kaunsa transport mode chahiye? Train, Bus, ya Flight?'\n};\n/**\n * Normalizes raw budget input from the user to a predefined TripContext budget type.\n * This function has been enhanced to recognize more variations of budget preferences.\n * @param raw The raw string input from the user.\n * @returns The normalized budget category or undefined if no match.\n */ const normalizeBudget = (raw)=>{\n    const txt = raw.toLowerCase().replace(/[\"']/g, '').trim();\n    // Direct and common phrase matches\n    if (txt.includes('luxury')) return 'Luxury';\n    if (txt.includes('medium')) return 'Medium';\n    // Prioritize 'budget-friendly' full phrase, then just 'budget'\n    if (txt.includes('budget-friendly') || txt.includes('budget')) return 'Budget-friendly';\n    // Abbreviation/partial matches for robustness\n    if (txt.includes('lux')) return 'Luxury';\n    if (txt.includes('med')) return 'Medium';\n    if (txt.includes('cheap') || txt.includes('low cost') || txt.includes('economical')) return 'Budget-friendly';\n    return undefined;\n};\n/**\n * Normalizes raw transport mode input from the user to a predefined TripContext mode type.\n * @param raw The raw string input from the user.\n * @returns The normalized mode of transport or undefined if no match.\n */ const normalizeMode = (raw)=>{\n    const txt = raw.toLowerCase();\n    if (txt.includes('train')) return 'Train';\n    if (txt.includes('bus')) return 'Bus';\n    if (txt.includes('flight')) return 'Flight';\n    return undefined;\n};\n/**\n * Generates a random price within a given range.\n * @param min The minimum price.\n * @param max The maximum price.\n * @returns A random integer price.\n */ const getRandomPrice = (min, max)=>Math.floor(Math.random() * (max - min + 1)) + min;\n/**\n * Handles POST requests to the trip planning API.\n * This is the main entry point for the conversational trip planning assistant.\n */ async function POST(req) {\n    try {\n        // Destructure incoming request body with default values\n        // IMPORTANT: For conversational flow, the client must send the 'context' object received\n        // from the previous API response back in subsequent requests.\n        const { message, lat, lng, context: ctxIn = {}, ask } = await req.json();\n        // Validate the incoming message\n        if (typeof message !== 'string' || !message.trim()) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Invalid or missing message.'\n            }, {\n                status: 400\n            });\n        }\n        // Clone existing context to avoid direct mutation of the input context\n        const context = {\n            ...ctxIn\n        };\n        // Determine if the user is answering a specific question or providing initial details\n        if (ask) {\n            // User is answering the last asked slot\n            const ans = message.trim();\n            switch(ask){\n                case 'from':\n                    context.from = ans;\n                    break;\n                case 'to':\n                    context.to = ans;\n                    break;\n                case 'date':\n                    context.date = ans;\n                    break;\n                case 'budget':\n                    context.budget = normalizeBudget(ans);\n                    break;\n                case 'groupSize':\n                    context.groupSize = ans;\n                    break;\n                case 'mode':\n                    context.mode = normalizeMode(ans);\n                    break;\n                default:\n                    // Handle unexpected 'ask' values gracefully\n                    console.warn(`Unexpected 'ask' parameter received: ${ask}`);\n                    break;\n            }\n        } else {\n            // First-turn or general input: try NLP extraction for from/to/date only\n            const parsed = await (0,_lib_nlpParser__WEBPACK_IMPORTED_MODULE_1__.parseTripDetails)(message);\n            // Only update context if the parsed value is not null and context doesn't already have it\n            context.from ||= parsed.from ?? undefined;\n            context.to ||= parsed.to ?? undefined;\n            context.date ||= parsed.date ?? undefined;\n        }\n        // GPS fallback for origin if 'from' is still missing\n        if (!context.from && lat != null && lng != null) {\n            try {\n                const liveLocation = await (0,_lib_location__WEBPACK_IMPORTED_MODULE_2__.getLiveLocation)(lat, lng);\n                if (liveLocation) {\n                    context.from = liveLocation;\n                } else {\n                    console.warn('Could not determine live location from provided coordinates.');\n                }\n            } catch (locationError) {\n                console.error('Error getting live location:', locationError);\n            // Continue without live location if there's an error\n            }\n        }\n        // Define the order of slots to check for completeness\n        const slots = [\n            'from',\n            'to',\n            'date',\n            'budget',\n            'groupSize',\n            'mode'\n        ];\n        // Find the first missing slot\n        const missing = slots.find((key)=>!context[key]);\n        // If there's a missing slot, ask the user for it\n        if (missing) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                assistantFollowUp: true,\n                ask: missing,\n                context,\n                message: QUESTIONS[missing]\n            });\n        }\n        // All required slots are filled—build the mock trip plan\n        // Ensure mode and budget are defined before accessing them, though the 'missing' check above should guarantee this.\n        if (!context.mode || !context.budget || !context.from || !context.to || !context.date) {\n            // This case should ideally not be hit if the 'missing' check is exhaustive\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Missing critical trip details to finalize plan.'\n            }, {\n                status: 500\n            });\n        }\n        const transportPrice = {\n            Train: getRandomPrice(800, 1800),\n            Bus: getRandomPrice(600, 1400),\n            Flight: getRandomPrice(1500, 4500)\n        }[context.mode];\n        const hotelPrice = {\n            Luxury: getRandomPrice(4000, 6000),\n            Medium: getRandomPrice(2500, 4000),\n            'Budget-friendly': getRandomPrice(1200, 2500)\n        }[context.budget];\n        const cabOptions = [\n            {\n                provider: 'Uber',\n                price: getRandomPrice(300, 450)\n            },\n            {\n                provider: 'Ola',\n                price: getRandomPrice(280, 400)\n            },\n            {\n                provider: 'Rapido',\n                price: getRandomPrice(200, 350)\n            }\n        ];\n        // Find the cheapest cab for station drop-off and most expensive for hotel drop-off (mock logic)\n        const cabToStation = cabOptions.reduce((a, b)=>a.price < b.price ? a : b);\n        const cabToHotel = cabOptions.reduce((a, b)=>a.price > b.price ? a : b);\n        const total = transportPrice + hotelPrice + cabToStation.price + cabToHotel.price;\n        // Construct the final trip plan object\n        const tripPlan = {\n            cabToStation: {\n                ...cabToStation,\n                from: `${context.from} City`,\n                to: `${context.from} Station`\n            },\n            transport: {\n                mode: context.mode,\n                name: `${context.from}-${context.to} ${context.mode} Service`,\n                from: context.from,\n                to: context.to,\n                date: context.date,\n                price: transportPrice\n            },\n            cabToHotel: {\n                ...cabToHotel,\n                from: `${context.to} Station`,\n                to: `Hotel ${context.to}`\n            },\n            hotel: {\n                name: `Hotel ${context.to}`,\n                price: hotelPrice,\n                category: context.budget\n            },\n            food: [\n                `Cafe ${context.to}`,\n                'Local Tadka',\n                'Chai Point'\n            ],\n            groupSize: context.groupSize,\n            total\n        };\n        // Return the successful trip plan\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            from: context.from,\n            to: context.to,\n            data: tripPlan,\n            message: `Done! Here’s your trip plan from ${context.from} to ${context.to} on ${context.date}. Shall I book it?`\n        });\n    } catch (error) {\n        console.error('Trip planning failed:', error);\n        let errorMessage = 'Something went wrong while planning your trip.';\n        if (error instanceof Error) {\n            errorMessage = error.message;\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: errorMessage\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUM7UUFDbkg7SUFDRixFQUFFLE9BQU80QixPQUFnQjtRQUN2QkcsUUFBUUgsS0FBSyxDQUFDLHlCQUF5QkE7UUFDdkMsSUFBSXFDLGVBQWU7UUFDbkIsSUFBSXJDLGlCQUFpQnNDLE9BQU87WUFDMUJELGVBQWVyQyxNQUFNUCxPQUFPO1FBQzlCO1FBQ0EsT0FBTzNCLHFEQUFZQSxDQUFDaUMsSUFBSSxDQUN0QjtZQUFFQyxPQUFPcUM7UUFBYSxHQUN0QjtZQUFFcEMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zdXJhanJhd2F0L0Rvd25sb2Fkcy9UcmlweS9hcHAvYXBpL2Jvb2stdHJpcC9yb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBhcGkvdHJpcC9yb3V0ZS50c1xuaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IHBhcnNlVHJpcERldGFpbHMgfSBmcm9tICdAL2xpYi9ubHBQYXJzZXInO1xuaW1wb3J0IHsgZ2V0TGl2ZUxvY2F0aW9uIH0gZnJvbSAnQC9saWIvbG9jYXRpb24nOyAvLyBBc3N1bWluZyB0aGlzIGZpbGUgZXhpc3RzIGFuZCB3b3JrcyBhcyBleHBlY3RlZFxuXG4vLyBEZWZpbmUgdGhlIHN0cnVjdHVyZSBmb3IgdGhlIHRyaXAgY29udGV4dCwgZW5zdXJpbmcgdHlwZSBzYWZldHlcbnR5cGUgVHJpcENvbnRleHQgPSB7XG4gIGZyb20/OiBzdHJpbmc7XG4gIHRvPzogc3RyaW5nO1xuICBkYXRlPzogc3RyaW5nO1xuICBidWRnZXQ/OiAnTHV4dXJ5JyB8ICdNZWRpdW0nIHwgJ0J1ZGdldC1mcmllbmRseSc7XG4gIGdyb3VwU2l6ZT86IHN0cmluZztcbiAgbW9kZT86ICdUcmFpbicgfCAnQnVzJyB8ICdGbGlnaHQnO1xufTtcblxuLy8gUXVlc3Rpb25zIHRvIGFzayB0aGUgdXNlciBmb3IgbWlzc2luZyB0cmlwIGRldGFpbHNcbmNvbnN0IFFVRVNUSU9OUzogUmVjb3JkPGtleW9mIFRyaXBDb250ZXh0LCBzdHJpbmc+ID0ge1xuICBmcm9tOiAgICAgICdLYWhhbiBzZSBzdGFydCBrYXJuYSBoYWk/IChPcmlnaW4gY2l0eSknLFxuICB0bzogICAgICAgICdLYWhhbiBqYW5hIGhhaT8gKERlc3RpbmF0aW9uIGNpdHkpJyxcbiAgZGF0ZTogICAgICAnVHJhdmVsIGtpIGRhdGUga3lhIGhhaT8gKGUuZy4gMTggQXVndXN0IDIwMjUpJyxcbiAgYnVkZ2V0OiAgICAnQWFwa2EgYnVkZ2V0IHByZWZlcmVuY2Uga3lhIGhhaT8gTHV4dXJ5LCBNZWRpdW0sIHlhIEJ1ZGdldC1mcmllbmRseT8nLFxuICBncm91cFNpemU6ICdTb2xvIGphIHJhaGUgaG8geWEgZ3JvdXAgbWVpbj8nLFxuICBtb2RlOiAgICAgICdLYXVuc2EgdHJhbnNwb3J0IG1vZGUgY2hhaGl5ZT8gVHJhaW4sIEJ1cywgeWEgRmxpZ2h0PycsXG59O1xuXG4vKipcbiAqIE5vcm1hbGl6ZXMgcmF3IGJ1ZGdldCBpbnB1dCBmcm9tIHRoZSB1c2VyIHRvIGEgcHJlZGVmaW5lZCBUcmlwQ29udGV4dCBidWRnZXQgdHlwZS5cbiAqIFRoaXMgZnVuY3Rpb24gaGFzIGJlZW4gZW5oYW5jZWQgdG8gcmVjb2duaXplIG1vcmUgdmFyaWF0aW9ucyBvZiBidWRnZXQgcHJlZmVyZW5jZXMuXG4gKiBAcGFyYW0gcmF3IFRoZSByYXcgc3RyaW5nIGlucHV0IGZyb20gdGhlIHVzZXIuXG4gKiBAcmV0dXJucyBUaGUgbm9ybWFsaXplZCBidWRnZXQgY2F0ZWdvcnkgb3IgdW5kZWZpbmVkIGlmIG5vIG1hdGNoLlxuICovXG5jb25zdCBub3JtYWxpemVCdWRnZXQgPSAocmF3OiBzdHJpbmcpOiBUcmlwQ29udGV4dFsnYnVkZ2V0J10gPT4ge1xuICBjb25zdCB0eHQgPSByYXcudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bXCInXS9nLCAnJykudHJpbSgpO1xuXG4gIC8vIERpcmVjdCBhbmQgY29tbW9uIHBocmFzZSBtYXRjaGVzXG4gIGlmICh0eHQuaW5jbHVkZXMoJ2x1eHVyeScpKSByZXR1cm4gJ0x1eHVyeSc7XG4gIGlmICh0eHQuaW5jbHVkZXMoJ21lZGl1bScpKSByZXR1cm4gJ01lZGl1bSc7XG4gIC8vIFByaW9yaXRpemUgJ2J1ZGdldC1mcmllbmRseScgZnVsbCBwaHJhc2UsIHRoZW4ganVzdCAnYnVkZ2V0J1xuICBpZiAodHh0LmluY2x1ZGVzKCdidWRnZXQtZnJpZW5kbHknKSB8fCB0eHQuaW5jbHVkZXMoJ2J1ZGdldCcpKSByZXR1cm4gJ0J1ZGdldC1mcmllbmRseSc7XG5cbiAgLy8gQWJicmV2aWF0aW9uL3BhcnRpYWwgbWF0Y2hlcyBmb3Igcm9idXN0bmVzc1xuICBpZiAodHh0LmluY2x1ZGVzKCdsdXgnKSkgcmV0dXJuICdMdXh1cnknO1xuICBpZiAodHh0LmluY2x1ZGVzKCdtZWQnKSkgcmV0dXJuICdNZWRpdW0nO1xuICBpZiAodHh0LmluY2x1ZGVzKCdjaGVhcCcpIHx8IHR4dC5pbmNsdWRlcygnbG93IGNvc3QnKSB8fCB0eHQuaW5jbHVkZXMoJ2Vjb25vbWljYWwnKSkgcmV0dXJuICdCdWRnZXQtZnJpZW5kbHknO1xuXG4gIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG4vKipcbiAqIE5vcm1hbGl6ZXMgcmF3IHRyYW5zcG9ydCBtb2RlIGlucHV0IGZyb20gdGhlIHVzZXIgdG8gYSBwcmVkZWZpbmVkIFRyaXBDb250ZXh0IG1vZGUgdHlwZS5cbiAqIEBwYXJhbSByYXcgVGhlIHJhdyBzdHJpbmcgaW5wdXQgZnJvbSB0aGUgdXNlci5cbiAqIEByZXR1cm5zIFRoZSBub3JtYWxpemVkIG1vZGUgb2YgdHJhbnNwb3J0IG9yIHVuZGVmaW5lZCBpZiBubyBtYXRjaC5cbiAqL1xuY29uc3Qgbm9ybWFsaXplTW9kZSA9IChyYXc6IHN0cmluZyk6IFRyaXBDb250ZXh0Wydtb2RlJ10gPT4ge1xuICBjb25zdCB0eHQgPSByYXcudG9Mb3dlckNhc2UoKTtcbiAgaWYgKHR4dC5pbmNsdWRlcygndHJhaW4nKSkgcmV0dXJuICdUcmFpbic7XG4gIGlmICh0eHQuaW5jbHVkZXMoJ2J1cycpKSByZXR1cm4gJ0J1cyc7XG4gIGlmICh0eHQuaW5jbHVkZXMoJ2ZsaWdodCcpKSByZXR1cm4gJ0ZsaWdodCc7XG4gIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG4vKipcbiAqIEdlbmVyYXRlcyBhIHJhbmRvbSBwcmljZSB3aXRoaW4gYSBnaXZlbiByYW5nZS5cbiAqIEBwYXJhbSBtaW4gVGhlIG1pbmltdW0gcHJpY2UuXG4gKiBAcGFyYW0gbWF4IFRoZSBtYXhpbXVtIHByaWNlLlxuICogQHJldHVybnMgQSByYW5kb20gaW50ZWdlciBwcmljZS5cbiAqL1xuY29uc3QgZ2V0UmFuZG9tUHJpY2UgPSAobWluOiBudW1iZXIsIG1heDogbnVtYmVyKTogbnVtYmVyID0+XG4gIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47XG5cbi8qKlxuICogSGFuZGxlcyBQT1NUIHJlcXVlc3RzIHRvIHRoZSB0cmlwIHBsYW5uaW5nIEFQSS5cbiAqIFRoaXMgaXMgdGhlIG1haW4gZW50cnkgcG9pbnQgZm9yIHRoZSBjb252ZXJzYXRpb25hbCB0cmlwIHBsYW5uaW5nIGFzc2lzdGFudC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIC8vIERlc3RydWN0dXJlIGluY29taW5nIHJlcXVlc3QgYm9keSB3aXRoIGRlZmF1bHQgdmFsdWVzXG4gICAgLy8gSU1QT1JUQU5UOiBGb3IgY29udmVyc2F0aW9uYWwgZmxvdywgdGhlIGNsaWVudCBtdXN0IHNlbmQgdGhlICdjb250ZXh0JyBvYmplY3QgcmVjZWl2ZWRcbiAgICAvLyBmcm9tIHRoZSBwcmV2aW91cyBBUEkgcmVzcG9uc2UgYmFjayBpbiBzdWJzZXF1ZW50IHJlcXVlc3RzLlxuICAgIGNvbnN0IHsgbWVzc2FnZSwgbGF0LCBsbmcsIGNvbnRleHQ6IGN0eEluID0ge30sIGFzayB9ID0gYXdhaXQgcmVxLmpzb24oKTtcblxuICAgIC8vIFZhbGlkYXRlIHRoZSBpbmNvbWluZyBtZXNzYWdlXG4gICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSAnc3RyaW5nJyB8fCAhbWVzc2FnZS50cmltKCkpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSW52YWxpZCBvciBtaXNzaW5nIG1lc3NhZ2UuJyB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgIH1cblxuICAgIC8vIENsb25lIGV4aXN0aW5nIGNvbnRleHQgdG8gYXZvaWQgZGlyZWN0IG11dGF0aW9uIG9mIHRoZSBpbnB1dCBjb250ZXh0XG4gICAgY29uc3QgY29udGV4dDogVHJpcENvbnRleHQgPSB7IC4uLmN0eEluIH07XG5cbiAgICAvLyBEZXRlcm1pbmUgaWYgdGhlIHVzZXIgaXMgYW5zd2VyaW5nIGEgc3BlY2lmaWMgcXVlc3Rpb24gb3IgcHJvdmlkaW5nIGluaXRpYWwgZGV0YWlsc1xuICAgIGlmIChhc2spIHtcbiAgICAgIC8vIFVzZXIgaXMgYW5zd2VyaW5nIHRoZSBsYXN0IGFza2VkIHNsb3RcbiAgICAgIGNvbnN0IGFucyA9IG1lc3NhZ2UudHJpbSgpO1xuICAgICAgc3dpdGNoIChhc2spIHtcbiAgICAgICAgY2FzZSAnZnJvbSc6XG4gICAgICAgICAgY29udGV4dC5mcm9tID0gYW5zO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd0byc6XG4gICAgICAgICAgY29udGV4dC50byA9IGFucztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZGF0ZSc6XG4gICAgICAgICAgY29udGV4dC5kYXRlID0gYW5zO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdidWRnZXQnOlxuICAgICAgICAgIGNvbnRleHQuYnVkZ2V0ID0gbm9ybWFsaXplQnVkZ2V0KGFucyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2dyb3VwU2l6ZSc6XG4gICAgICAgICAgY29udGV4dC5ncm91cFNpemUgPSBhbnM7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ21vZGUnOlxuICAgICAgICAgIGNvbnRleHQubW9kZSA9IG5vcm1hbGl6ZU1vZGUoYW5zKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAvLyBIYW5kbGUgdW5leHBlY3RlZCAnYXNrJyB2YWx1ZXMgZ3JhY2VmdWxseVxuICAgICAgICAgIGNvbnNvbGUud2FybihgVW5leHBlY3RlZCAnYXNrJyBwYXJhbWV0ZXIgcmVjZWl2ZWQ6ICR7YXNrfWApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGaXJzdC10dXJuIG9yIGdlbmVyYWwgaW5wdXQ6IHRyeSBOTFAgZXh0cmFjdGlvbiBmb3IgZnJvbS90by9kYXRlIG9ubHlcbiAgICAgIGNvbnN0IHBhcnNlZCA9IGF3YWl0IHBhcnNlVHJpcERldGFpbHMobWVzc2FnZSk7XG4gICAgICAvLyBPbmx5IHVwZGF0ZSBjb250ZXh0IGlmIHRoZSBwYXJzZWQgdmFsdWUgaXMgbm90IG51bGwgYW5kIGNvbnRleHQgZG9lc24ndCBhbHJlYWR5IGhhdmUgaXRcbiAgICAgIGNvbnRleHQuZnJvbSB8fD0gcGFyc2VkLmZyb20gPz8gdW5kZWZpbmVkO1xuICAgICAgY29udGV4dC50byAgIHx8PSBwYXJzZWQudG8gICA/PyB1bmRlZmluZWQ7XG4gICAgICBjb250ZXh0LmRhdGUgfHw9IHBhcnNlZC5kYXRlID8/IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvLyBHUFMgZmFsbGJhY2sgZm9yIG9yaWdpbiBpZiAnZnJvbScgaXMgc3RpbGwgbWlzc2luZ1xuICAgIGlmICghY29udGV4dC5mcm9tICYmIGxhdCAhPSBudWxsICYmIGxuZyAhPSBudWxsKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBsaXZlTG9jYXRpb24gPSBhd2FpdCBnZXRMaXZlTG9jYXRpb24obGF0LCBsbmcpO1xuICAgICAgICBpZiAobGl2ZUxvY2F0aW9uKSB7XG4gICAgICAgICAgY29udGV4dC5mcm9tID0gbGl2ZUxvY2F0aW9uO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUud2FybignQ291bGQgbm90IGRldGVybWluZSBsaXZlIGxvY2F0aW9uIGZyb20gcHJvdmlkZWQgY29vcmRpbmF0ZXMuJyk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGxvY2F0aW9uRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBsaXZlIGxvY2F0aW9uOicsIGxvY2F0aW9uRXJyb3IpO1xuICAgICAgICAvLyBDb250aW51ZSB3aXRob3V0IGxpdmUgbG9jYXRpb24gaWYgdGhlcmUncyBhbiBlcnJvclxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIERlZmluZSB0aGUgb3JkZXIgb2Ygc2xvdHMgdG8gY2hlY2sgZm9yIGNvbXBsZXRlbmVzc1xuICAgIGNvbnN0IHNsb3RzOiAoa2V5b2YgVHJpcENvbnRleHQpW10gPSBbJ2Zyb20nLCAndG8nLCAnZGF0ZScsICdidWRnZXQnLCAnZ3JvdXBTaXplJywgJ21vZGUnXTtcbiAgICAvLyBGaW5kIHRoZSBmaXJzdCBtaXNzaW5nIHNsb3RcbiAgICBjb25zdCBtaXNzaW5nID0gc2xvdHMuZmluZCgoa2V5KSA9PiAhY29udGV4dFtrZXldKTtcblxuICAgIC8vIElmIHRoZXJlJ3MgYSBtaXNzaW5nIHNsb3QsIGFzayB0aGUgdXNlciBmb3IgaXRcbiAgICBpZiAobWlzc2luZykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgYXNzaXN0YW50Rm9sbG93VXA6IHRydWUsXG4gICAgICAgIGFzazogbWlzc2luZywgLy8gU2V0IHRoZSAnYXNrJyB0byB0aGUgKm5leHQqIG1pc3Npbmcgc2xvdFxuICAgICAgICBjb250ZXh0LFxuICAgICAgICBtZXNzYWdlOiBRVUVTVElPTlNbbWlzc2luZ10sXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBBbGwgcmVxdWlyZWQgc2xvdHMgYXJlIGZpbGxlZOKAlGJ1aWxkIHRoZSBtb2NrIHRyaXAgcGxhblxuICAgIC8vIEVuc3VyZSBtb2RlIGFuZCBidWRnZXQgYXJlIGRlZmluZWQgYmVmb3JlIGFjY2Vzc2luZyB0aGVtLCB0aG91Z2ggdGhlICdtaXNzaW5nJyBjaGVjayBhYm92ZSBzaG91bGQgZ3VhcmFudGVlIHRoaXMuXG4gICAgaWYgKCFjb250ZXh0Lm1vZGUgfHwgIWNvbnRleHQuYnVkZ2V0IHx8ICFjb250ZXh0LmZyb20gfHwgIWNvbnRleHQudG8gfHwgIWNvbnRleHQuZGF0ZSkge1xuICAgICAgICAvLyBUaGlzIGNhc2Ugc2hvdWxkIGlkZWFsbHkgbm90IGJlIGhpdCBpZiB0aGUgJ21pc3NpbmcnIGNoZWNrIGlzIGV4aGF1c3RpdmVcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdNaXNzaW5nIGNyaXRpY2FsIHRyaXAgZGV0YWlscyB0byBmaW5hbGl6ZSBwbGFuLicgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgICB9XG5cbiAgICBjb25zdCB0cmFuc3BvcnRQcmljZSA9IHtcbiAgICAgIFRyYWluOiBnZXRSYW5kb21QcmljZSg4MDAsIDE4MDApLFxuICAgICAgQnVzOiAgIGdldFJhbmRvbVByaWNlKDYwMCwgMTQwMCksXG4gICAgICBGbGlnaHQ6Z2V0UmFuZG9tUHJpY2UoMTUwMCwgNDUwMCksXG4gICAgfVtjb250ZXh0Lm1vZGVdO1xuXG4gICAgY29uc3QgaG90ZWxQcmljZSA9IHtcbiAgICAgIEx1eHVyeTogICAgICAgICBnZXRSYW5kb21QcmljZSg0MDAwLCA2MDAwKSxcbiAgICAgIE1lZGl1bTogICAgICAgICBnZXRSYW5kb21QcmljZSgyNTAwLCA0MDAwKSxcbiAgICAgICdCdWRnZXQtZnJpZW5kbHknOiBnZXRSYW5kb21QcmljZSgxMjAwLCAyNTAwKSxcbiAgICB9W2NvbnRleHQuYnVkZ2V0XTtcblxuICAgIGNvbnN0IGNhYk9wdGlvbnMgPSBbXG4gICAgICB7IHByb3ZpZGVyOiAnVWJlcicsICAgcHJpY2U6IGdldFJhbmRvbVByaWNlKDMwMCwgNDUwKSB9LFxuICAgICAgeyBwcm92aWRlcjogJ09sYScsICAgIHByaWNlOiBnZXRSYW5kb21QcmljZSgyODAsIDQwMCkgfSxcbiAgICAgIHsgcHJvdmlkZXI6ICdSYXBpZG8nLCBwcmljZTogZ2V0UmFuZG9tUHJpY2UoMjAwLCAzNTApIH0sXG4gICAgXTtcbiAgICAvLyBGaW5kIHRoZSBjaGVhcGVzdCBjYWIgZm9yIHN0YXRpb24gZHJvcC1vZmYgYW5kIG1vc3QgZXhwZW5zaXZlIGZvciBob3RlbCBkcm9wLW9mZiAobW9jayBsb2dpYylcbiAgICBjb25zdCBjYWJUb1N0YXRpb24gPSBjYWJPcHRpb25zLnJlZHVjZSgoYSwgYikgPT4gKGEucHJpY2UgPCBiLnByaWNlID8gYSA6IGIpKTtcbiAgICBjb25zdCBjYWJUb0hvdGVsICAgPSBjYWJPcHRpb25zLnJlZHVjZSgoYSwgYikgPT4gKGEucHJpY2UgPiBiLnByaWNlID8gYSA6IGIpKTtcblxuICAgIGNvbnN0IHRvdGFsID0gdHJhbnNwb3J0UHJpY2UgKyBob3RlbFByaWNlICsgY2FiVG9TdGF0aW9uLnByaWNlICsgY2FiVG9Ib3RlbC5wcmljZTtcblxuICAgIC8vIENvbnN0cnVjdCB0aGUgZmluYWwgdHJpcCBwbGFuIG9iamVjdFxuICAgIGNvbnN0IHRyaXBQbGFuID0ge1xuICAgICAgY2FiVG9TdGF0aW9uOiB7XG4gICAgICAgIC4uLmNhYlRvU3RhdGlvbixcbiAgICAgICAgZnJvbTogYCR7Y29udGV4dC5mcm9tfSBDaXR5YCxcbiAgICAgICAgdG86ICAgYCR7Y29udGV4dC5mcm9tfSBTdGF0aW9uYCxcbiAgICAgIH0sXG4gICAgICB0cmFuc3BvcnQ6IHtcbiAgICAgICAgbW9kZTogIGNvbnRleHQubW9kZSxcbiAgICAgICAgbmFtZTogIGAke2NvbnRleHQuZnJvbX0tJHtjb250ZXh0LnRvfSAke2NvbnRleHQubW9kZX0gU2VydmljZWAsXG4gICAgICAgIGZyb206ICBjb250ZXh0LmZyb20sXG4gICAgICAgIHRvOiAgICBjb250ZXh0LnRvLFxuICAgICAgICBkYXRlOiAgY29udGV4dC5kYXRlLFxuICAgICAgICBwcmljZTogdHJhbnNwb3J0UHJpY2UsXG4gICAgICB9LFxuICAgICAgY2FiVG9Ib3RlbDoge1xuICAgICAgICAuLi5jYWJUb0hvdGVsLFxuICAgICAgICBmcm9tOiBgJHtjb250ZXh0LnRvfSBTdGF0aW9uYCxcbiAgICAgICAgdG86ICAgYEhvdGVsICR7Y29udGV4dC50b31gLFxuICAgICAgfSxcbiAgICAgIGhvdGVsOiB7XG4gICAgICAgIG5hbWU6ICAgICBgSG90ZWwgJHtjb250ZXh0LnRvfWAsXG4gICAgICAgIHByaWNlOiAgICBob3RlbFByaWNlLFxuICAgICAgICBjYXRlZ29yeTogY29udGV4dC5idWRnZXQsXG4gICAgICB9LFxuICAgICAgZm9vZDogICAgICBbYENhZmUgJHtjb250ZXh0LnRvfWAsICdMb2NhbCBUYWRrYScsICdDaGFpIFBvaW50J10sIC8vIE1vY2sgZm9vZCBzdWdnZXN0aW9uc1xuICAgICAgZ3JvdXBTaXplOiBjb250ZXh0Lmdyb3VwU2l6ZSxcbiAgICAgIHRvdGFsLFxuICAgIH07XG5cbiAgICAvLyBSZXR1cm4gdGhlIHN1Y2Nlc3NmdWwgdHJpcCBwbGFuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBmcm9tOiAgICBjb250ZXh0LmZyb20sXG4gICAgICB0bzogICAgICBjb250ZXh0LnRvLFxuICAgICAgZGF0YTogICAgdHJpcFBsYW4sXG4gICAgICBtZXNzYWdlOiBgRG9uZSEgSGVyZeKAmXMgeW91ciB0cmlwIHBsYW4gZnJvbSAke2NvbnRleHQuZnJvbX0gdG8gJHtjb250ZXh0LnRvfSBvbiAke2NvbnRleHQuZGF0ZX0uIFNoYWxsIEkgYm9vayBpdD9gLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikgeyAvLyBVc2UgJ3Vua25vd24nIGZvciBiZXR0ZXIgdHlwZSBzYWZldHkgaW4gY2F0Y2ggYmxvY2tzXG4gICAgY29uc29sZS5lcnJvcignVHJpcCBwbGFubmluZyBmYWlsZWQ6JywgZXJyb3IpO1xuICAgIGxldCBlcnJvck1lc3NhZ2UgPSAnU29tZXRoaW5nIHdlbnQgd3Jvbmcgd2hpbGUgcGxhbm5pbmcgeW91ciB0cmlwLic7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XG4gICAgfVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6IGVycm9yTWVzc2FnZSB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJwYXJzZVRyaXBEZXRhaWxzIiwiZ2V0TGl2ZUxvY2F0aW9uIiwiUVVFU1RJT05TIiwiZnJvbSIsInRvIiwiZGF0ZSIsImJ1ZGdldCIsImdyb3VwU2l6ZSIsIm1vZGUiLCJub3JtYWxpemVCdWRnZXQiLCJyYXciLCJ0eHQiLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJ0cmltIiwiaW5jbHVkZXMiLCJ1bmRlZmluZWQiLCJub3JtYWxpemVNb2RlIiwiZ2V0UmFuZG9tUHJpY2UiLCJtaW4iLCJtYXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJQT1NUIiwicmVxIiwibWVzc2FnZSIsImxhdCIsImxuZyIsImNvbnRleHQiLCJjdHhJbiIsImFzayIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsImFucyIsImNvbnNvbGUiLCJ3YXJuIiwicGFyc2VkIiwibGl2ZUxvY2F0aW9uIiwibG9jYXRpb25FcnJvciIsInNsb3RzIiwibWlzc2luZyIsImZpbmQiLCJrZXkiLCJhc3Npc3RhbnRGb2xsb3dVcCIsInRyYW5zcG9ydFByaWNlIiwiVHJhaW4iLCJCdXMiLCJGbGlnaHQiLCJob3RlbFByaWNlIiwiTHV4dXJ5IiwiTWVkaXVtIiwiY2FiT3B0aW9ucyIsInByb3ZpZGVyIiwicHJpY2UiLCJjYWJUb1N0YXRpb24iLCJyZWR1Y2UiLCJhIiwiYiIsImNhYlRvSG90ZWwiLCJ0b3RhbCIsInRyaXBQbGFuIiwidHJhbnNwb3J0IiwibmFtZSIsImhvdGVsIiwiY2F0ZWdvcnkiLCJmb29kIiwic3VjY2VzcyIsImRhdGEiLCJlcnJvck1lc3NhZ2UiLCJFcnJvciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/book-trip/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/location.ts":
/*!*************************!*\
  !*** ./lib/location.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getLiveLocation: () => (/* binding */ getLiveLocation)\n/* harmony export */ });\n// lib/location.ts\nasync function getLiveLocation(lat, lng) {\n    try {\n        if (lat && lng) {\n            const response = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}`);\n            const data = await response.json();\n            return data.address?.city || data.address?.town || data.address?.village || \"Unknown\";\n        }\n        return \"Delhi\"; // fallback\n    } catch (error) {\n        console.error(\"Failed to get location from coordinates\", error);\n        return \"Delhi\"; // fallback\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbG9jYXRpb24udHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLGtCQUFrQjtBQUNYLGVBQWVBLGdCQUFnQkMsR0FBWSxFQUFFQyxHQUFZO0lBQzlELElBQUk7UUFDRixJQUFJRCxPQUFPQyxLQUFLO1lBQ2QsTUFBTUMsV0FBVyxNQUFNQyxNQUFNLENBQUMsNERBQTRELEVBQUVILElBQUksS0FBSyxFQUFFQyxLQUFLO1lBQzVHLE1BQU1HLE9BQU8sTUFBTUYsU0FBU0csSUFBSTtZQUNoQyxPQUFPRCxLQUFLRSxPQUFPLEVBQUVDLFFBQVFILEtBQUtFLE9BQU8sRUFBRUUsUUFBUUosS0FBS0UsT0FBTyxFQUFFRyxXQUFXO1FBQzlFO1FBQ0EsT0FBTyxTQUFTLFdBQVc7SUFDN0IsRUFBRSxPQUFPQyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQywyQ0FBMkNBO1FBQ3pELE9BQU8sU0FBUyxXQUFXO0lBQzdCO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zdXJhanJhd2F0L0Rvd25sb2Fkcy9UcmlweS9saWIvbG9jYXRpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbGliL2xvY2F0aW9uLnRzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TGl2ZUxvY2F0aW9uKGxhdD86IG51bWJlciwgbG5nPzogbnVtYmVyKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgdHJ5IHtcbiAgICBpZiAobGF0ICYmIGxuZykge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly9ub21pbmF0aW0ub3BlbnN0cmVldG1hcC5vcmcvcmV2ZXJzZT9mb3JtYXQ9anNvbiZsYXQ9JHtsYXR9Jmxvbj0ke2xuZ31gKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICByZXR1cm4gZGF0YS5hZGRyZXNzPy5jaXR5IHx8IGRhdGEuYWRkcmVzcz8udG93biB8fCBkYXRhLmFkZHJlc3M/LnZpbGxhZ2UgfHwgXCJVbmtub3duXCI7XG4gICAgfVxuICAgIHJldHVybiBcIkRlbGhpXCI7IC8vIGZhbGxiYWNrXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBnZXQgbG9jYXRpb24gZnJvbSBjb29yZGluYXRlc1wiLCBlcnJvcik7XG4gICAgcmV0dXJuIFwiRGVsaGlcIjsgLy8gZmFsbGJhY2tcbiAgfVxufVxuIl0sIm5hbWVzIjpbImdldExpdmVMb2NhdGlvbiIsImxhdCIsImxuZyIsInJlc3BvbnNlIiwiZmV0Y2giLCJkYXRhIiwianNvbiIsImFkZHJlc3MiLCJjaXR5IiwidG93biIsInZpbGxhZ2UiLCJlcnJvciIsImNvbnNvbGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/location.ts\n");

/***/ }),

/***/ "(rsc)/./lib/nlpParser.ts":
/*!**************************!*\
  !*** ./lib/nlpParser.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseTripDetails: () => (/* binding */ parseTripDetails)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n// lib/nlpParser.ts\n\n/**\n * Parses trip details from a user message using an OpenAI model.\n * @param message The user's input message.\n * @returns A promise resolving to ParsedTripDetails.\n */ async function parseTripDetails(message) {\n    // Ensure OPENROUTER_API_KEY is available before proceeding\n    const apiKey = process.env.OPENROUTER_API_KEY;\n    if (!apiKey) {\n        console.error('OPENROUTER_API_KEY is not set in environment variables.');\n        // Return a default empty object or throw an error based on desired behavior\n        return {\n            from: null,\n            to: null,\n            date: null,\n            intent: null\n        };\n    }\n    const openai = new openai__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n        apiKey: apiKey,\n        baseURL: 'https://openrouter.ai/api/v1'\n    });\n    const systemPrompt = `\nYou are an expert travel assistant API. Your job is to extract structured travel information from a user's message.\n\nThe user's message will be a request to book a trip.\nExtract the departure city, the destination city, and the date of travel.\n\nReply ONLY with a valid JSON object in the following format:\n{\n  \"from\": \"Departure City\",\n  \"to\": \"Destination City\",\n  \"date\": \"Date in natural language (e.g., '30 August', 'tomorrow', 'next Friday')\",\n  \"intent\": \"book_trip\"\n}\n\nIf any piece of information (like 'from', 'to', or 'date') is not present in the user's message, return null for that field. Do not make up information.\nEnsure the response is a single JSON object with no extra explanation.\n`;\n    try {\n        const completion = await openai.chat.completions.create({\n            model: 'openai/gpt-3.5-turbo',\n            messages: [\n                {\n                    role: 'system',\n                    content: systemPrompt.trim()\n                },\n                {\n                    role: 'user',\n                    content: message\n                }\n            ],\n            temperature: 0\n        });\n        const raw = completion.choices?.[0]?.message?.content;\n        if (!raw) {\n            throw new Error('No response content received from the AI model.');\n        }\n        let parsedRaw;\n        try {\n            parsedRaw = JSON.parse(raw.trim());\n        } catch (err) {\n            console.error('❌ Failed to parse JSON from AI response:', err);\n            // Provide more context in the error message for debugging\n            throw new Error(`AI response is not valid JSON:\\n${raw}\\nParsing error: ${err instanceof Error ? err.message : String(err)}`);\n        }\n        // Ensure parsedRaw is an object and cast it for type safety\n        const parsed = parsedRaw && typeof parsedRaw === 'object' && !Array.isArray(parsedRaw) ? parsedRaw : {};\n        return {\n            from: typeof parsed.from === 'string' ? parsed.from : null,\n            to: typeof parsed.to === 'string' ? parsed.to : null,\n            date: typeof parsed.date === 'string' ? parsed.date : null,\n            intent: typeof parsed.intent === 'string' ? parsed.intent : null\n        };\n    } catch (error) {\n        console.error('❌ Error parsing trip details with AI:', error);\n        // Return nulls on error, allowing the main handler to ask follow-up questions\n        return {\n            from: null,\n            to: null,\n            date: null,\n            intent: null\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbmxwUGFyc2VyLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsbUJBQW1CO0FBQ1M7QUFTNUI7Ozs7Q0FJQyxHQUNNLGVBQWVDLGlCQUNwQkMsT0FBZTtJQUVmLDJEQUEyRDtJQUMzRCxNQUFNQyxTQUFTQyxRQUFRQyxHQUFHLENBQUNDLGtCQUFrQjtJQUM3QyxJQUFJLENBQUNILFFBQVE7UUFDWEksUUFBUUMsS0FBSyxDQUFDO1FBQ2QsNEVBQTRFO1FBQzVFLE9BQU87WUFBRUMsTUFBTTtZQUFNQyxJQUFJO1lBQU1DLE1BQU07WUFBTUMsUUFBUTtRQUFLO0lBQzFEO0lBRUEsTUFBTUMsU0FBUyxJQUFJYiw4Q0FBTUEsQ0FBQztRQUN4QkcsUUFBUUE7UUFDUlcsU0FBUztJQUNYO0lBRUEsTUFBTUMsZUFBZSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7O0FBZ0J4QixDQUFDO0lBRUMsSUFBSTtRQUNGLE1BQU1DLGFBQWEsTUFBTUgsT0FBT0ksSUFBSSxDQUFDQyxXQUFXLENBQUNDLE1BQU0sQ0FBQztZQUN0REMsT0FBTztZQUNQQyxVQUFVO2dCQUNSO29CQUFFQyxNQUFNO29CQUFVQyxTQUFTUixhQUFhUyxJQUFJO2dCQUFHO2dCQUMvQztvQkFBRUYsTUFBTTtvQkFBUUMsU0FBU3JCO2dCQUFRO2FBQ2xDO1lBQ0R1QixhQUFhO1FBQ2Y7UUFFQSxNQUFNQyxNQUFNVixXQUFXVyxPQUFPLEVBQUUsQ0FBQyxFQUFFLEVBQUV6QixTQUFTcUI7UUFDOUMsSUFBSSxDQUFDRyxLQUFLO1lBQ1IsTUFBTSxJQUFJRSxNQUFNO1FBQ2xCO1FBRUEsSUFBSUM7UUFDSixJQUFJO1lBQ0ZBLFlBQVlDLEtBQUtDLEtBQUssQ0FBQ0wsSUFBSUYsSUFBSTtRQUNqQyxFQUFFLE9BQU9RLEtBQWM7WUFDckJ6QixRQUFRQyxLQUFLLENBQUMsNENBQTRDd0I7WUFDMUQsMERBQTBEO1lBQzFELE1BQU0sSUFBSUosTUFBTSxDQUFDLGdDQUFnQyxFQUFFRixJQUFJLGlCQUFpQixFQUFFTSxlQUFlSixRQUFRSSxJQUFJOUIsT0FBTyxHQUFHK0IsT0FBT0QsTUFBTTtRQUM5SDtRQUVBLDREQUE0RDtRQUM1RCxNQUFNRSxTQUNKTCxhQUFhLE9BQU9BLGNBQWMsWUFBWSxDQUFDTSxNQUFNQyxPQUFPLENBQUNQLGFBQ3hEQSxZQUNELENBQUM7UUFFUCxPQUFPO1lBQ0xwQixNQUFNLE9BQU95QixPQUFPekIsSUFBSSxLQUFLLFdBQVd5QixPQUFPekIsSUFBSSxHQUFHO1lBQ3REQyxJQUFJLE9BQU93QixPQUFPeEIsRUFBRSxLQUFLLFdBQVd3QixPQUFPeEIsRUFBRSxHQUFHO1lBQ2hEQyxNQUFNLE9BQU91QixPQUFPdkIsSUFBSSxLQUFLLFdBQVd1QixPQUFPdkIsSUFBSSxHQUFHO1lBQ3REQyxRQUFRLE9BQU9zQixPQUFPdEIsTUFBTSxLQUFLLFdBQVdzQixPQUFPdEIsTUFBTSxHQUFHO1FBQzlEO0lBQ0YsRUFBRSxPQUFPSixPQUFnQjtRQUN2QkQsUUFBUUMsS0FBSyxDQUFDLHlDQUF5Q0E7UUFDdkQsOEVBQThFO1FBQzlFLE9BQU87WUFDTEMsTUFBTTtZQUNOQyxJQUFJO1lBQ0pDLE1BQU07WUFDTkMsUUFBUTtRQUNWO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL3N1cmFqcmF3YXQvRG93bmxvYWRzL1RyaXB5L2xpYi9ubHBQYXJzZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbGliL25scFBhcnNlci50c1xuaW1wb3J0IE9wZW5BSSBmcm9tICdvcGVuYWknO1xuXG5leHBvcnQgdHlwZSBQYXJzZWRUcmlwRGV0YWlscyA9IHtcbiAgZnJvbT86IHN0cmluZyB8IG51bGw7XG4gIHRvPzogc3RyaW5nIHwgbnVsbDtcbiAgZGF0ZT86IHN0cmluZyB8IG51bGw7XG4gIGludGVudD86IHN0cmluZyB8IG51bGw7XG59O1xuXG4vKipcbiAqIFBhcnNlcyB0cmlwIGRldGFpbHMgZnJvbSBhIHVzZXIgbWVzc2FnZSB1c2luZyBhbiBPcGVuQUkgbW9kZWwuXG4gKiBAcGFyYW0gbWVzc2FnZSBUaGUgdXNlcidzIGlucHV0IG1lc3NhZ2UuXG4gKiBAcmV0dXJucyBBIHByb21pc2UgcmVzb2x2aW5nIHRvIFBhcnNlZFRyaXBEZXRhaWxzLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcGFyc2VUcmlwRGV0YWlscyhcbiAgbWVzc2FnZTogc3RyaW5nXG4pOiBQcm9taXNlPFBhcnNlZFRyaXBEZXRhaWxzPiB7XG4gIC8vIEVuc3VyZSBPUEVOUk9VVEVSX0FQSV9LRVkgaXMgYXZhaWxhYmxlIGJlZm9yZSBwcm9jZWVkaW5nXG4gIGNvbnN0IGFwaUtleSA9IHByb2Nlc3MuZW52Lk9QRU5ST1VURVJfQVBJX0tFWTtcbiAgaWYgKCFhcGlLZXkpIHtcbiAgICBjb25zb2xlLmVycm9yKCdPUEVOUk9VVEVSX0FQSV9LRVkgaXMgbm90IHNldCBpbiBlbnZpcm9ubWVudCB2YXJpYWJsZXMuJyk7XG4gICAgLy8gUmV0dXJuIGEgZGVmYXVsdCBlbXB0eSBvYmplY3Qgb3IgdGhyb3cgYW4gZXJyb3IgYmFzZWQgb24gZGVzaXJlZCBiZWhhdmlvclxuICAgIHJldHVybiB7IGZyb206IG51bGwsIHRvOiBudWxsLCBkYXRlOiBudWxsLCBpbnRlbnQ6IG51bGwgfTtcbiAgfVxuXG4gIGNvbnN0IG9wZW5haSA9IG5ldyBPcGVuQUkoe1xuICAgIGFwaUtleTogYXBpS2V5LCAvLyBVc2UgdGhlIGNoZWNrZWQgQVBJIGtleVxuICAgIGJhc2VVUkw6ICdodHRwczovL29wZW5yb3V0ZXIuYWkvYXBpL3YxJyxcbiAgfSk7XG5cbiAgY29uc3Qgc3lzdGVtUHJvbXB0ID0gYFxuWW91IGFyZSBhbiBleHBlcnQgdHJhdmVsIGFzc2lzdGFudCBBUEkuIFlvdXIgam9iIGlzIHRvIGV4dHJhY3Qgc3RydWN0dXJlZCB0cmF2ZWwgaW5mb3JtYXRpb24gZnJvbSBhIHVzZXIncyBtZXNzYWdlLlxuXG5UaGUgdXNlcidzIG1lc3NhZ2Ugd2lsbCBiZSBhIHJlcXVlc3QgdG8gYm9vayBhIHRyaXAuXG5FeHRyYWN0IHRoZSBkZXBhcnR1cmUgY2l0eSwgdGhlIGRlc3RpbmF0aW9uIGNpdHksIGFuZCB0aGUgZGF0ZSBvZiB0cmF2ZWwuXG5cblJlcGx5IE9OTFkgd2l0aCBhIHZhbGlkIEpTT04gb2JqZWN0IGluIHRoZSBmb2xsb3dpbmcgZm9ybWF0Olxue1xuICBcImZyb21cIjogXCJEZXBhcnR1cmUgQ2l0eVwiLFxuICBcInRvXCI6IFwiRGVzdGluYXRpb24gQ2l0eVwiLFxuICBcImRhdGVcIjogXCJEYXRlIGluIG5hdHVyYWwgbGFuZ3VhZ2UgKGUuZy4sICczMCBBdWd1c3QnLCAndG9tb3Jyb3cnLCAnbmV4dCBGcmlkYXknKVwiLFxuICBcImludGVudFwiOiBcImJvb2tfdHJpcFwiXG59XG5cbklmIGFueSBwaWVjZSBvZiBpbmZvcm1hdGlvbiAobGlrZSAnZnJvbScsICd0bycsIG9yICdkYXRlJykgaXMgbm90IHByZXNlbnQgaW4gdGhlIHVzZXIncyBtZXNzYWdlLCByZXR1cm4gbnVsbCBmb3IgdGhhdCBmaWVsZC4gRG8gbm90IG1ha2UgdXAgaW5mb3JtYXRpb24uXG5FbnN1cmUgdGhlIHJlc3BvbnNlIGlzIGEgc2luZ2xlIEpTT04gb2JqZWN0IHdpdGggbm8gZXh0cmEgZXhwbGFuYXRpb24uXG5gO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgY29tcGxldGlvbiA9IGF3YWl0IG9wZW5haS5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZSh7XG4gICAgICBtb2RlbDogJ29wZW5haS9ncHQtMy41LXR1cmJvJyxcbiAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6IHN5c3RlbVByb21wdC50cmltKCkgfSxcbiAgICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6IG1lc3NhZ2UgfSxcbiAgICAgIF0sXG4gICAgICB0ZW1wZXJhdHVyZTogMCxcbiAgICB9KTtcblxuICAgIGNvbnN0IHJhdyA9IGNvbXBsZXRpb24uY2hvaWNlcz8uWzBdPy5tZXNzYWdlPy5jb250ZW50O1xuICAgIGlmICghcmF3KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHJlc3BvbnNlIGNvbnRlbnQgcmVjZWl2ZWQgZnJvbSB0aGUgQUkgbW9kZWwuJyk7XG4gICAgfVxuXG4gICAgbGV0IHBhcnNlZFJhdzogdW5rbm93bjtcbiAgICB0cnkge1xuICAgICAgcGFyc2VkUmF3ID0gSlNPTi5wYXJzZShyYXcudHJpbSgpKTtcbiAgICB9IGNhdGNoIChlcnI6IHVua25vd24pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGYWlsZWQgdG8gcGFyc2UgSlNPTiBmcm9tIEFJIHJlc3BvbnNlOicsIGVycik7XG4gICAgICAvLyBQcm92aWRlIG1vcmUgY29udGV4dCBpbiB0aGUgZXJyb3IgbWVzc2FnZSBmb3IgZGVidWdnaW5nXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEFJIHJlc3BvbnNlIGlzIG5vdCB2YWxpZCBKU09OOlxcbiR7cmF3fVxcblBhcnNpbmcgZXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFN0cmluZyhlcnIpfWApO1xuICAgIH1cblxuICAgIC8vIEVuc3VyZSBwYXJzZWRSYXcgaXMgYW4gb2JqZWN0IGFuZCBjYXN0IGl0IGZvciB0eXBlIHNhZmV0eVxuICAgIGNvbnN0IHBhcnNlZCA9XG4gICAgICBwYXJzZWRSYXcgJiYgdHlwZW9mIHBhcnNlZFJhdyA9PT0gJ29iamVjdCcgJiYgIUFycmF5LmlzQXJyYXkocGFyc2VkUmF3KVxuICAgICAgICA/IChwYXJzZWRSYXcgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pXG4gICAgICAgIDoge307XG5cbiAgICByZXR1cm4ge1xuICAgICAgZnJvbTogdHlwZW9mIHBhcnNlZC5mcm9tID09PSAnc3RyaW5nJyA/IHBhcnNlZC5mcm9tIDogbnVsbCxcbiAgICAgIHRvOiB0eXBlb2YgcGFyc2VkLnRvID09PSAnc3RyaW5nJyA/IHBhcnNlZC50byA6IG51bGwsXG4gICAgICBkYXRlOiB0eXBlb2YgcGFyc2VkLmRhdGUgPT09ICdzdHJpbmcnID8gcGFyc2VkLmRhdGUgOiBudWxsLFxuICAgICAgaW50ZW50OiB0eXBlb2YgcGFyc2VkLmludGVudCA9PT0gJ3N0cmluZycgPyBwYXJzZWQuaW50ZW50IDogbnVsbCxcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBwYXJzaW5nIHRyaXAgZGV0YWlscyB3aXRoIEFJOicsIGVycm9yKTtcbiAgICAvLyBSZXR1cm4gbnVsbHMgb24gZXJyb3IsIGFsbG93aW5nIHRoZSBtYWluIGhhbmRsZXIgdG8gYXNrIGZvbGxvdy11cCBxdWVzdGlvbnNcbiAgICByZXR1cm4ge1xuICAgICAgZnJvbTogbnVsbCxcbiAgICAgIHRvOiBudWxsLFxuICAgICAgZGF0ZTogbnVsbCxcbiAgICAgIGludGVudDogbnVsbCxcbiAgICB9O1xuICB9XG59Il0sIm5hbWVzIjpbIk9wZW5BSSIsInBhcnNlVHJpcERldGFpbHMiLCJtZXNzYWdlIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk9QRU5ST1VURVJfQVBJX0tFWSIsImNvbnNvbGUiLCJlcnJvciIsImZyb20iLCJ0byIsImRhdGUiLCJpbnRlbnQiLCJvcGVuYWkiLCJiYXNlVVJMIiwic3lzdGVtUHJvbXB0IiwiY29tcGxldGlvbiIsImNoYXQiLCJjb21wbGV0aW9ucyIsImNyZWF0ZSIsIm1vZGVsIiwibWVzc2FnZXMiLCJyb2xlIiwiY29udGVudCIsInRyaW0iLCJ0ZW1wZXJhdHVyZSIsInJhdyIsImNob2ljZXMiLCJFcnJvciIsInBhcnNlZFJhdyIsIkpTT04iLCJwYXJzZSIsImVyciIsIlN0cmluZyIsInBhcnNlZCIsIkFycmF5IiwiaXNBcnJheSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/nlpParser.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/openai"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fbook-trip%2Froute&page=%2Fapi%2Fbook-trip%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbook-trip%2Froute.ts&appDir=%2FUsers%2Fsurajrawat%2FDownloads%2FTripy%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsurajrawat%2FDownloads%2FTripy&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=export&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();