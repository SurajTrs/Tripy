(()=>{var e={};e.id=489,e.ids=[489],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},5511:e=>{"use strict";e.exports=require("crypto")},9021:e=>{"use strict";e.exports=require("fs")},3873:e=>{"use strict";e.exports=require("path")},7903:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>y,routeModule:()=>f,serverHooks:()=>p,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>g});var n={};t.r(n),t.d(n,{POST:()=>l});var o=t(2706),i=t(8203),a=t(5994),s=t(9187),u=t(4512),c=t(5900);async function l(e){try{let e=await (0,u.UL)(),r=e.get("session_token")?.value;r&&await (0,c.ME)(r);let t=s.NextResponse.json({message:"Logged out successfully"});return t.cookies.delete("session_token"),t}catch(e){return console.error("Logout error:",e),s.NextResponse.json({message:"Internal server error"},{status:500})}}let f=new o.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/auth/logout/route",pathname:"/api/auth/logout",filename:"route",bundlePath:"app/api/auth/logout/route"},resolvedPagePath:"/Users/surajrawat/Downloads/Tripy/app/api/auth/logout/route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:d,workUnitAsyncStorage:g,serverHooks:p}=f;function y(){return(0,a.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:g})}},9230:(e,r,t)=>{"use strict";t.r(r),t.d(r,{"00792d98f3de0b0c957a0a33adfef061e830089dbf":()=>n.lo,"403980207efafd47dd57b7cd7a111890c0a24d888a":()=>n.nu,"7f321eab5a8728ed7e2aa41e2e79841e2d4077828f":()=>n.kg,"7f5c198435244005e8a1d7eb570b47c29788ce402b":()=>n.CF,"7f89533fbea31e626534bde2c9d7debb65ec6055a8":()=>n.$z,"7f96abeee4aadd7e27e6369fe2f61622a74229e243":()=>n.KP,"7f9ef4683243e0001e5c6781624b3b842fe32c3ec3":()=>n.lC,"7fa9583635d4c73f10f989f35187a93d8005b6ebe8":()=>n.Gs,"7fb408d56da0789bfe3d8ac989887863d2ae31a4b0":()=>n.jw,"7fc3d7464473b732d22494ae2c2c0c384b8fdf0a19":()=>n.ME});var n=t(5900)},6487:()=>{},8335:()=>{},5900:(e,r,t)=>{"use strict";t.d(r,{$z:()=>w,CF:()=>m,Gs:()=>y,KP:()=>v,ME:()=>A,jw:()=>h,kg:()=>S,lC:()=>b,lo:()=>g,nu:()=>p});var n=t(8977);t(8063);var o=t(9021),i=t.n(o),a=t(3873),s=t.n(a),u=t(691),c=t(6215);let l=s().join(process.cwd(),"users.json"),f=[],d=()=>{console.log("Current sessions:",f.map(e=>({id:e.id,userId:e.userId})))};async function g(){try{let e=i().readFileSync(l,"utf-8");return JSON.parse(e)}catch(e){return console.error("Error reading users file:",e),[]}}async function p(e){let r=await g();r.push(e),i().writeFileSync(l,JSON.stringify(r,null,2))}async function y(e){return(await g()).find(r=>r.email===e)}async function b(e){return(await g()).find(r=>r.id===e)}async function S(e){let r={...e,id:`user_${Date.now()}_${Math.random().toString(36).substring(2,8)}`,createdAt:new Date().toISOString()};return await p(r),r}async function h(e){let r=(0,u.A)(),t={id:r,userId:e,createdAt:new Date().toISOString(),expiresAt:new Date(Date.now()+6048e5).toISOString()};return f.push(t),console.log("Server AuthStore: Created new session:",{sessionId:r,userId:e}),console.log("Server AuthStore: Total sessions:",f.length),r}async function v(e){if(!e||"string"!=typeof e){console.log("Server AuthStore: Invalid session ID provided:",e);return}console.log("Server AuthStore: Finding session:",e),d();let r=new Date,t=f.filter(e=>new Date(e.expiresAt)<=r);t.length>0&&(console.log(`Server AuthStore: Removing ${t.length} expired sessions`),t.forEach(e=>{console.log("Server AuthStore: Removing expired session:",e.id)}));let n=(f=f.filter(e=>new Date(e.expiresAt)>r)).find(r=>r.id===e);if(console.log("Server AuthStore: Session found:",!!n),n){if(console.log("Server AuthStore: Session user ID:",n.userId),console.log("Server AuthStore: Session expires:",new Date(n.expiresAt).toISOString()),new Date(n.expiresAt)<=r){console.log("Server AuthStore: Session is expired, removing it"),f=f.filter(r=>r.id!==e);return}}else console.log("Server AuthStore: No matching session found for ID:",e);return n}async function A(e){f=f.filter(r=>r.id!==e)}async function w(e){let{password:r,...t}=e;return t}async function m(){return await g()}(0,c.D)([g,p,y,b,S,h,v,A,w,m]),(0,n.A)(g,"00792d98f3de0b0c957a0a33adfef061e830089dbf",null),(0,n.A)(p,"403980207efafd47dd57b7cd7a111890c0a24d888a",null),(0,n.A)(y,"7fa9583635d4c73f10f989f35187a93d8005b6ebe8",null),(0,n.A)(b,"7f9ef4683243e0001e5c6781624b3b842fe32c3ec3",null),(0,n.A)(S,"7f321eab5a8728ed7e2aa41e2e79841e2d4077828f",null),(0,n.A)(h,"7fb408d56da0789bfe3d8ac989887863d2ae31a4b0",null),(0,n.A)(v,"7f96abeee4aadd7e27e6369fe2f61622a74229e243",null),(0,n.A)(A,"7fc3d7464473b732d22494ae2c2c0c384b8fdf0a19",null),(0,n.A)(w,"7f89533fbea31e626534bde2c9d7debb65ec6055a8",null),(0,n.A)(m,"7f5c198435244005e8a1d7eb570b47c29788ce402b",null)},6215:(e,r)=>{"use strict";function t(e){for(let r=0;r<e.length;r++){let t=e[r];if("function"!=typeof t)throw Error(`A "use server" file can only export async functions, found ${typeof t}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`)}}Object.defineProperty(r,"D",{enumerable:!0,get:function(){return t}})},8977:(e,r,t)=>{"use strict";Object.defineProperty(r,"A",{enumerable:!0,get:function(){return n.registerServerReference}});let n=t(6760)},4175:(e,r,t)=>{"use strict";let n;Object.defineProperty(r,"__esModule",{value:!0}),function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{arrayBufferToString:function(){return s},decrypt:function(){return l},encrypt:function(){return c},getActionEncryptionKey:function(){return y},getClientReferenceManifestForRsc:function(){return p},getServerModuleMap:function(){return g},setReferenceManifestsSingleton:function(){return d},stringToUint8Array:function(){return u}});let o=t(9212),i=t(2045),a=t(9294);function s(e){let r=new Uint8Array(e),t=r.byteLength;if(t<65535)return String.fromCharCode.apply(null,r);let n="";for(let e=0;e<t;e++)n+=String.fromCharCode(r[e]);return n}function u(e){let r=e.length,t=new Uint8Array(r);for(let n=0;n<r;n++)t[n]=e.charCodeAt(n);return t}function c(e,r,t){return crypto.subtle.encrypt({name:"AES-GCM",iv:r},e,t)}function l(e,r,t){return crypto.subtle.decrypt({name:"AES-GCM",iv:r},e,t)}let f=Symbol.for("next.server.action-manifests");function d({page:e,clientReferenceManifest:r,serverActionsManifest:t,serverModuleMap:n}){var o;let a=null==(o=globalThis[f])?void 0:o.clientReferenceManifestsPerPage;globalThis[f]={clientReferenceManifestsPerPage:{...a,[(0,i.normalizeAppPath)(e)]:r},serverActionsManifest:t,serverModuleMap:n}}function g(){let e=globalThis[f];if(!e)throw new o.InvariantError("Missing manifest for Server Actions.");return e.serverModuleMap}function p(){let e=globalThis[f];if(!e)throw new o.InvariantError("Missing manifest for Server Actions.");let{clientReferenceManifestsPerPage:r}=e,t=a.workAsyncStorage.getStore();if(!t)return function(e){let r=Object.values(e),t={clientModules:{},edgeRscModuleMapping:{},rscModuleMapping:{}};for(let e of r)t.clientModules={...t.clientModules,...e.clientModules},t.edgeRscModuleMapping={...t.edgeRscModuleMapping,...e.edgeRscModuleMapping},t.rscModuleMapping={...t.rscModuleMapping,...e.rscModuleMapping};return t}(r);let n=r[t.route];if(!n)throw new o.InvariantError(`Missing Client Reference Manifest for ${t.route}.`);return n}async function y(){if(n)return n;let e=globalThis[f];if(!e)throw new o.InvariantError("Missing manifest for Server Actions.");let r=process.env.NEXT_SERVER_ACTIONS_ENCRYPTION_KEY||e.serverActionsManifest.encryptionKey;if(void 0===r)throw new o.InvariantError("Missing encryption key for Server Actions");return n=await crypto.subtle.importKey("raw",u(atob(r)),"AES-GCM",!0,["encrypt","decrypt"])}},8063:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{decryptActionBoundArgs:function(){return g},encryptActionBoundArgs:function(){return d}}),t(7315);let n=t(6760),o=t(8534),i=t(7212),a=t(4175),s=t(3033),u=new TextEncoder,c=new TextDecoder;async function l(e,r){let t=await (0,a.getActionEncryptionKey)();if(void 0===t)throw Error("Missing encryption key for Server Action. This is a bug in Next.js");let n=atob(r),o=n.slice(0,16),i=n.slice(16),s=c.decode(await (0,a.decrypt)(t,(0,a.stringToUint8Array)(o),(0,a.stringToUint8Array)(i)));if(!s.startsWith(e))throw Error("Invalid Server Action payload: failed to decrypt.");return s.slice(e.length)}async function f(e,r){let t=await (0,a.getActionEncryptionKey)();if(void 0===t)throw Error("Missing encryption key for Server Action. This is a bug in Next.js");let n=new Uint8Array(16);s.workUnitAsyncStorage.exit(()=>crypto.getRandomValues(n));let o=(0,a.arrayBufferToString)(n.buffer),i=await (0,a.encrypt)(t,n,u.encode(e+r));return btoa(o+(0,a.arrayBufferToString)(i))}async function d(e,r){let{clientModules:t}=(0,a.getClientReferenceManifestForRsc)(),o=Error();Error.captureStackTrace(o,d);let u=!1,c=await (0,i.streamToString)((0,n.renderToReadableStream)(r,t,{onError(e){u||(u=!0,o.message=e instanceof Error?e.message:String(e))}}));if(u)throw o;let l=s.workUnitAsyncStorage.getStore();if(!l)return f(e,c);let g=(0,s.getPrerenderResumeDataCache)(l),p=(0,s.getRenderResumeDataCache)(l),y=e+c,b=(null==g?void 0:g.encryptedBoundArgs.get(y))??(null==p?void 0:p.encryptedBoundArgs.get(y));if(b)return b;let S="prerender"===l.type?l.cacheSignal:void 0;null==S||S.beginRead();let h=await f(e,c);return null==S||S.endRead(),null==g||g.encryptedBoundArgs.set(y,h),h}async function g(e,r){let{edgeRscModuleMapping:t,rscModuleMapping:n}=(0,a.getClientReferenceManifestForRsc)(),i=await l(e,await r);return await (0,o.createFromReadableStream)(new ReadableStream({start(e){e.enqueue(u.encode(i)),e.close()}}),{serverConsumerManifest:{moduleLoading:null,moduleMap:n,serverModuleMap:(0,a.getServerModuleMap)()}})}},164:(e,r)=>{"use strict";function t(e){return e.startsWith("/")?e:"/"+e}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ensureLeadingSlash",{enumerable:!0,get:function(){return t}})},2045:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{normalizeAppPath:function(){return i},normalizeRscURL:function(){return a}});let n=t(164),o=t(8758);function i(e){return(0,n.ensureLeadingSlash)(e.split("/").reduce((e,r,t,n)=>!r||(0,o.isGroupSegment)(r)||"@"===r[0]||("page"===r||"route"===r)&&t===n.length-1?e:e+"/"+r,""))}function a(e){return e.replace(/\.rsc($|\?)/,"$1")}},691:(e,r,t)=>{"use strict";t.d(r,{A:()=>u});var n=t(5511);let o={randomUUID:n.randomUUID},i=new Uint8Array(256),a=i.length,s=[];for(let e=0;e<256;++e)s.push((e+256).toString(16).slice(1));let u=function(e,r,t){if(o.randomUUID&&!r&&!e)return o.randomUUID();let u=(e=e||{}).random??e.rng?.()??(a>i.length-16&&((0,n.randomFillSync)(i),a=0),i.slice(a,a+=16));if(u.length<16)throw Error("Random bytes length must be >= 16");if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,r){if((t=t||0)<0||t+16>r.length)throw RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let e=0;e<16;++e)r[t+e]=u[e];return r}return function(e,r=0){return(s[e[r+0]]+s[e[r+1]]+s[e[r+2]]+s[e[r+3]]+"-"+s[e[r+4]]+s[e[r+5]]+"-"+s[e[r+6]]+s[e[r+7]]+"-"+s[e[r+8]]+s[e[r+9]]+"-"+s[e[r+10]]+s[e[r+11]]+s[e[r+12]]+s[e[r+13]]+s[e[r+14]]+s[e[r+15]]).toLowerCase()}(u)}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[994,452,732,512],()=>t(7903));module.exports=n})();