(()=>{var e={};e.id=672,e.ids=[672,841],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},6980:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>m,routeModule:()=>p,serverHooks:()=>l,workAsyncStorage:()=>c,workUnitAsyncStorage:()=>h});var a={};t.r(a),t.d(a,{GET:()=>d});var s=t(2706),o=t(8203),n=t(5994),i=t(9187),u=t(9841);async function d(e){try{let r=new URL(e.url),t=r.searchParams.get("origin"),a=r.searchParams.get("destination"),s=r.searchParams.get("departureDate"),o=r.searchParams.get("passengers");if(!t||!a||!s)return i.NextResponse.json({success:!1,message:"Missing required parameters"},{status:400});let n=await (0,u.searchTrains)({origin:t,destination:a,departureDate:s,passengers:o?parseInt(o,10):1});return i.NextResponse.json({success:!0,data:n})}catch(e){return console.error("Train search error:",e),i.NextResponse.json({success:!1,message:e.message||"Failed to search trains"},{status:500})}}let p=new s.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/train/route",pathname:"/api/train",filename:"route",bundlePath:"app/api/train/route"},resolvedPagePath:"/Users/surajrawat/Downloads/Tripy/app/api/train/route.ts",nextConfigOutput:"",userland:a}),{workAsyncStorage:c,workUnitAsyncStorage:h,serverHooks:l}=p;function m(){return(0,n.patchFetch)({workAsyncStorage:c,workUnitAsyncStorage:h})}},6487:()=>{},8335:()=>{},9841:(e,r,t)=>{"use strict";async function a(e){if(!process.env.RAPIDAPI_KEY)throw Error("Train API credentials are not configured.");try{return function(e,r,t,a){let s=[`${r} Express`,`${e} - ${r} Shatabdi`,`${e} - ${r} Rajdhani`,`${e} - ${r} Duronto`,`${e} - ${r} Superfast`],o=["Superfast","Express","Passenger","Shatabdi","Rajdhani","Duronto"],n=["1A","2A","3A","SL","CC","EC"],i=new Date(t),u=Math.floor(3*Math.random())+3,d=[];for(let t=0;t<u;t++){let t=6+Math.floor(16*Math.random()),a=Math.floor(60*Math.random()),u=new Date(i);u.setHours(t,a,0,0);let p=3+Math.floor(9*Math.random()),c=Math.floor(60*Math.random()),h=new Date(u);h.setHours(h.getHours()+p,h.getMinutes()+c);let l=800+Math.floor(2200*Math.random()),m=`${1e4+Math.floor(9e4*Math.random())}`,g=s[Math.floor(Math.random()*s.length)],f=o[Math.floor(Math.random()*o.length)],M=n[Math.floor(Math.random()*n.length)],w=10+Math.floor(190*Math.random());d.push({id:`TRAIN-${m}`,trainNumber:m,trainName:g,trainType:f,departureTime:u.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),arrivalTime:h.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),duration:`${p}h ${c}m`,price:l,currency:"INR",departureCity:e,arrivalCity:r,departureDate:i.toISOString().split("T")[0],availableSeats:w,trainClass:M,platform:`${1+Math.floor(10*Math.random())}`,deeplink:"https://www.irctc.co.in/nget/train-search"})}return d}(e.origin,e.destination,e.departureDate,e.passengers)}catch(e){throw console.error("Train API Error:",e),Error(`Failed to fetch train data: ${e.message}`)}}async function s(e,r,t,a=!1){let o="string"==typeof e?e:e.id;if(await new Promise(e=>setTimeout(e,1500+1e3*Math.random())),!(Math.random()>.1))throw Error(`${a?"Return train":"Train"} booking failed - no seats available`);return{type:"train",isReturn:a,bookingId:`TRAIN-${a?"RET-":""}${Date.now()}-${Math.random().toString(36).substring(2,8).toUpperCase()}`,pnr:`${Math.random().toString(36).substring(2,10).toUpperCase()}`,status:"confirmed",trainId:o,passengers:t,totalAmount:"object"==typeof e?e.price*t:0}}t.d(r,{O:()=>s,searchTrains:()=>a})}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[994,452],()=>t(6980));module.exports=a})();