/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/trip/route";
exports.ids = ["app/api/trip/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ftrip%2Froute&page=%2Fapi%2Ftrip%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftrip%2Froute.ts&appDir=%2FUsers%2Fsurajrawat%2FDownloads%2FTripy%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsurajrawat%2FDownloads%2FTripy&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=export&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ftrip%2Froute&page=%2Fapi%2Ftrip%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftrip%2Froute.ts&appDir=%2FUsers%2Fsurajrawat%2FDownloads%2FTripy%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsurajrawat%2FDownloads%2FTripy&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=export&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_surajrawat_Downloads_Tripy_app_api_trip_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/trip/route.ts */ \"(rsc)/./app/api/trip/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"export\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/trip/route\",\n        pathname: \"/api/trip\",\n        filename: \"route\",\n        bundlePath: \"app/api/trip/route\"\n    },\n    resolvedPagePath: \"/Users/surajrawat/Downloads/Tripy/app/api/trip/route.ts\",\n    nextConfigOutput,\n    userland: _Users_surajrawat_Downloads_Tripy_app_api_trip_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZ0cmlwJTJGcm91dGUmcGFnZT0lMkZhcGklMkZ0cmlwJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGdHJpcCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnN1cmFqcmF3YXQlMkZEb3dubG9hZHMlMkZUcmlweSUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZzdXJhanJhd2F0JTJGRG93bmxvYWRzJTJGVHJpcHkmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9ZXhwb3J0JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ087QUFDcEY7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBc0Q7QUFDOUQ7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDMEY7O0FBRTFGIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9zdXJhanJhd2F0L0Rvd25sb2Fkcy9UcmlweS9hcHAvYXBpL3RyaXAvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiZXhwb3J0XCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3RyaXAvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS90cmlwXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS90cmlwL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3N1cmFqcmF3YXQvRG93bmxvYWRzL1RyaXB5L2FwcC9hcGkvdHJpcC9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ftrip%2Froute&page=%2Fapi%2Ftrip%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftrip%2Froute.ts&appDir=%2FUsers%2Fsurajrawat%2FDownloads%2FTripy%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsurajrawat%2FDownloads%2FTripy&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=export&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./app/api/trip/route.ts":
/*!*******************************!*\
  !*** ./app/api/trip/route.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_nlpParser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/nlpParser */ \"(rsc)/./lib/nlpParser.ts\");\n/* harmony import */ var _lib_flightApi__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/flightApi */ \"(rsc)/./lib/flightApi.ts\");\n// app/api/trip/route.ts\n\n\n\nconst QUESTIONS = {\n    from: 'Where are you departing from? (Departure city)',\n    to: 'Where do you want to go? (Destination city)',\n    date: 'What is your travel date? (e.g. 18 August 2025 or Tomorrow)',\n    budget: 'What is your budget preference? Luxury, Medium, or Budget-friendly?',\n    groupSize: 'Are you traveling solo or in a group? (e.g., Solo, 2 people, Group of 5)',\n    mode: 'What transport mode do you prefer? Train, Bus, or Flight?'\n};\nfunction getRandomPrice(min, max) {\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n}\nasync function POST(req) {\n    try {\n        const { message, context: ctxIn = {} } = await req.json();\n        const context = {\n            ...ctxIn\n        };\n        if (!message?.trim()) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Invalid message.'\n            }, {\n                status: 400\n            });\n        }\n        const parsed = await (0,_lib_nlpParser__WEBPACK_IMPORTED_MODULE_1__.parseTripDetails)(message);\n        console.log(\"Parsed NLP details:\", parsed);\n        // --- Intent Handling can remain here ---\n        // ...\n        // Update context with the latest information from the user's message\n        if (parsed.from) context.from = parsed.from;\n        if (parsed.to) context.to = parsed.to;\n        if (parsed.date) context.date = parsed.date;\n        if (parsed.budget) context.budget = parsed.budget;\n        if (parsed.groupSize != null) context.groupSize = parsed.groupSize;\n        if (parsed.mode) context.mode = parsed.mode;\n        // --- REVISED INTERACTIVE PLANNING LOGIC ---\n        // --- FIX: The logic is now combined. If a flight is selected AND a budget is now available\n        // (either from a previous turn or the current one), we proceed directly to hotels.\n        // STEP 2: SEARCH FOR HOTELS (This check now comes before the flight search)\n        // Condition: A flight is selected, and a budget is set, but no hotel has been selected yet.\n        if (context.flight && context.budget && !context.hotel) {\n            // MOCK HOTEL SEARCH\n            const hotels = Array.from({\n                length: 3\n            }).map((_, i)=>{\n                const base = context.budget === 'Luxury' ? 4000 : context.budget === 'Medium' ? 2000 : 800;\n                const price = getRandomPrice(base, base + 1500);\n                return {\n                    id: `hotel_${i}`,\n                    name: `${context.budget} Hotel Option ${i + 1}`,\n                    price,\n                    currency: 'INR',\n                    category: context.budget,\n                    rating: 3.5 + i * 0.5,\n                    address: `123 Main St, ${context.to || ''}`,\n                    deeplink: `https://mock.hotels/book?d=${context.to}&p=${price}`,\n                    imageUrl: `https://placehold.co/400x200/7c3aed/ffffff?text=Hotel+${i + 1}`\n                };\n            });\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                assistantFollowUp: true,\n                ask: 'groupSize',\n                message: \"Perfect. Based on your budget, here are some hotel options. Please select one. Now, just to confirm, how many people are traveling?\",\n                context: context,\n                data: {\n                    availableHotels: hotels,\n                    transport: context.flight\n                }\n            });\n        }\n        // STEP 1: SEARCH FOR FLIGHTS\n        // Condition: We have enough info for a flight search, but no flight has been selected yet.\n        if (context.from && context.to && context.date && context.mode === 'Flight' && !context.flight) {\n            try {\n                const flights = await (0,_lib_flightApi__WEBPACK_IMPORTED_MODULE_2__.searchFlights)({\n                    origin: context.from,\n                    destination: context.to,\n                    departureDate: context.date,\n                    adults: context.groupSize || 1\n                });\n                if (flights.length > 0) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        assistantFollowUp: true,\n                        ask: 'budget',\n                        message: \"Great! I've found several flights for you. Please select one. In the meantime, what's your budget for the trip?\",\n                        context: context,\n                        data: {\n                            availableFlights: flights\n                        }\n                    });\n                } else {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: false,\n                        message: `I'm sorry, I couldn't find any flights from ${context.from} to ${context.to} for that date. Would you like to try a different date?`,\n                        context: {\n                            ...context,\n                            date: undefined\n                        }\n                    });\n                }\n            } catch (e) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    message: `Flight search failed: ${e.message}`\n                });\n            }\n        }\n        // STEP 3: FINALIZE THE PLAN\n        if (context.flight && context.hotel && context.groupSize) {\n            const cabToStationPrice = getRandomPrice(400, 700);\n            const cabToHotelPrice = getRandomPrice(500, 800);\n            const totalCost = context.flight.price * context.groupSize + context.hotel.price * context.groupSize + cabToStationPrice + cabToHotelPrice;\n            const finalPlan = {\n                transport: context.flight,\n                hotel: context.hotel,\n                cabToStation: {\n                    name: `Cab to Airport in ${context.from}`,\n                    price: cabToStationPrice,\n                    details: 'Standard Ride'\n                },\n                cabToHotel: {\n                    name: `Cab from Airport in ${context.to}`,\n                    price: cabToHotelPrice,\n                    details: 'Standard Ride'\n                },\n                groupSize: context.groupSize,\n                total: totalCost\n            };\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                message: \"Excellent! Your personalized trip is all planned out. Here is the final summary.\",\n                data: finalPlan,\n                context: {\n                    lastPlannedTrip: finalPlan\n                }\n            });\n        }\n        // --- FALLBACK: ASK THE NEXT QUESTION ---\n        const slots = [\n            'from',\n            'to',\n            'date',\n            'mode',\n            'budget',\n            'groupSize'\n        ];\n        const missing = slots.find((k)=>context[k] == null);\n        if (missing) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                assistantFollowUp: true,\n                ask: missing,\n                context: {\n                    ...context,\n                    ask: missing\n                },\n                message: QUESTIONS[missing]\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            message: \"I'm not sure what to do next. Could you please clarify?\",\n            context: context\n        });\n    } catch (err) {\n        console.error(\"API Route Error:\", err);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: err.message || 'An unexpected error occurred.'\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bkQsU0FBUztvQkFBRSxHQUFHQSxPQUFPO29CQUFFNEIsS0FBS3VCO2dCQUFRO2dCQUNwQ3BELFNBQVNmLFNBQVMsQ0FBQ21FLFFBQVE7WUFDN0I7UUFDRjtRQUVBLE9BQU90RSxxREFBWUEsQ0FBQ3FCLElBQUksQ0FBQztZQUNyQm9DLFNBQVM7WUFDVHZDLFNBQVM7WUFDVEMsU0FBU0E7UUFDYjtJQUVGLEVBQUUsT0FBT3NELEtBQVU7UUFDakIvQyxRQUFRSCxLQUFLLENBQUMsb0JBQW9Ca0Q7UUFDbEMsT0FBT3pFLHFEQUFZQSxDQUFDcUIsSUFBSSxDQUFDO1lBQUVFLE9BQU9rRCxJQUFJdkQsT0FBTyxJQUFJO1FBQWdDLEdBQUc7WUFBRU0sUUFBUTtRQUFJO0lBQ3BHO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zdXJhanJhd2F0L0Rvd25sb2Fkcy9UcmlweS9hcHAvYXBpL3RyaXAvcm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gYXBwL2FwaS90cmlwL3JvdXRlLnRzXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgVHJpcENvbnRleHQsIFRyaXBQbGFuRGF0YSwgRmxpZ2h0RGF0YSwgSG90ZWxEYXRhLCBQYXJzZWRUcmlwRGV0YWlscyB9IGZyb20gJy4uLy4uLy4uL3R5cGVzJztcbmltcG9ydCB7IHBhcnNlVHJpcERldGFpbHMgfSBmcm9tICdAL2xpYi9ubHBQYXJzZXInO1xuaW1wb3J0IHsgc2VhcmNoRmxpZ2h0cyB9IGZyb20gJ0AvbGliL2ZsaWdodEFwaSc7XG5cbmNvbnN0IFFVRVNUSU9OUzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgZnJvbTogJ1doZXJlIGFyZSB5b3UgZGVwYXJ0aW5nIGZyb20/IChEZXBhcnR1cmUgY2l0eSknLFxuICB0bzogJ1doZXJlIGRvIHlvdSB3YW50IHRvIGdvPyAoRGVzdGluYXRpb24gY2l0eSknLFxuICBkYXRlOiAnV2hhdCBpcyB5b3VyIHRyYXZlbCBkYXRlPyAoZS5nLiAxOCBBdWd1c3QgMjAyNSBvciBUb21vcnJvdyknLFxuICBidWRnZXQ6ICdXaGF0IGlzIHlvdXIgYnVkZ2V0IHByZWZlcmVuY2U/IEx1eHVyeSwgTWVkaXVtLCBvciBCdWRnZXQtZnJpZW5kbHk/JyxcbiAgZ3JvdXBTaXplOiAnQXJlIHlvdSB0cmF2ZWxpbmcgc29sbyBvciBpbiBhIGdyb3VwPyAoZS5nLiwgU29sbywgMiBwZW9wbGUsIEdyb3VwIG9mIDUpJyxcbiAgbW9kZTogJ1doYXQgdHJhbnNwb3J0IG1vZGUgZG8geW91IHByZWZlcj8gVHJhaW4sIEJ1cywgb3IgRmxpZ2h0PycsXG59O1xuXG5mdW5jdGlvbiBnZXRSYW5kb21QcmljZShtaW46IG51bWJlciwgbWF4OiBudW1iZXIpOiBudW1iZXIge1xuICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgbWVzc2FnZSwgY29udGV4dDogY3R4SW4gPSB7fSB9ID0gYXdhaXQgcmVxLmpzb24oKTtcbiAgICBjb25zdCBjb250ZXh0OiBUcmlwQ29udGV4dCA9IHsgLi4uY3R4SW4gfTtcblxuICAgIGlmICghbWVzc2FnZT8udHJpbSgpKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgbWVzc2FnZS4nIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgcGFyc2VkOiBQYXJzZWRUcmlwRGV0YWlscyA9IGF3YWl0IHBhcnNlVHJpcERldGFpbHMobWVzc2FnZSk7XG4gICAgY29uc29sZS5sb2coXCJQYXJzZWQgTkxQIGRldGFpbHM6XCIsIHBhcnNlZCk7XG5cbiAgICAvLyAtLS0gSW50ZW50IEhhbmRsaW5nIGNhbiByZW1haW4gaGVyZSAtLS1cbiAgICAvLyAuLi5cblxuICAgIC8vIFVwZGF0ZSBjb250ZXh0IHdpdGggdGhlIGxhdGVzdCBpbmZvcm1hdGlvbiBmcm9tIHRoZSB1c2VyJ3MgbWVzc2FnZVxuICAgIGlmIChwYXJzZWQuZnJvbSkgY29udGV4dC5mcm9tID0gcGFyc2VkLmZyb207XG4gICAgaWYgKHBhcnNlZC50bykgY29udGV4dC50byA9IHBhcnNlZC50bztcbiAgICBpZiAocGFyc2VkLmRhdGUpIGNvbnRleHQuZGF0ZSA9IHBhcnNlZC5kYXRlO1xuICAgIGlmIChwYXJzZWQuYnVkZ2V0KSBjb250ZXh0LmJ1ZGdldCA9IHBhcnNlZC5idWRnZXQ7XG4gICAgaWYgKHBhcnNlZC5ncm91cFNpemUgIT0gbnVsbCkgY29udGV4dC5ncm91cFNpemUgPSBwYXJzZWQuZ3JvdXBTaXplO1xuICAgIGlmIChwYXJzZWQubW9kZSkgY29udGV4dC5tb2RlID0gcGFyc2VkLm1vZGU7XG4gICAgXG4gICAgLy8gLS0tIFJFVklTRUQgSU5URVJBQ1RJVkUgUExBTk5JTkcgTE9HSUMgLS0tXG5cbiAgICAvLyAtLS0gRklYOiBUaGUgbG9naWMgaXMgbm93IGNvbWJpbmVkLiBJZiBhIGZsaWdodCBpcyBzZWxlY3RlZCBBTkQgYSBidWRnZXQgaXMgbm93IGF2YWlsYWJsZVxuICAgIC8vIChlaXRoZXIgZnJvbSBhIHByZXZpb3VzIHR1cm4gb3IgdGhlIGN1cnJlbnQgb25lKSwgd2UgcHJvY2VlZCBkaXJlY3RseSB0byBob3RlbHMuXG5cbiAgICAvLyBTVEVQIDI6IFNFQVJDSCBGT1IgSE9URUxTIChUaGlzIGNoZWNrIG5vdyBjb21lcyBiZWZvcmUgdGhlIGZsaWdodCBzZWFyY2gpXG4gICAgLy8gQ29uZGl0aW9uOiBBIGZsaWdodCBpcyBzZWxlY3RlZCwgYW5kIGEgYnVkZ2V0IGlzIHNldCwgYnV0IG5vIGhvdGVsIGhhcyBiZWVuIHNlbGVjdGVkIHlldC5cbiAgICBpZiAoY29udGV4dC5mbGlnaHQgJiYgY29udGV4dC5idWRnZXQgJiYgIWNvbnRleHQuaG90ZWwpIHtcbiAgICAgIC8vIE1PQ0sgSE9URUwgU0VBUkNIXG4gICAgICBjb25zdCBob3RlbHM6IEhvdGVsRGF0YVtdID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMyB9KS5tYXAoKF8sIGkpID0+IHtcbiAgICAgICAgY29uc3QgYmFzZSA9IGNvbnRleHQuYnVkZ2V0ID09PSAnTHV4dXJ5JyA/IDQwMDAgOiBjb250ZXh0LmJ1ZGdldCA9PT0gJ01lZGl1bScgPyAyMDAwIDogODAwO1xuICAgICAgICBjb25zdCBwcmljZSA9IGdldFJhbmRvbVByaWNlKGJhc2UsIGJhc2UgKyAxNTAwKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpZDogYGhvdGVsXyR7aX1gLCBuYW1lOiBgJHtjb250ZXh0LmJ1ZGdldH0gSG90ZWwgT3B0aW9uICR7aSArIDF9YCwgcHJpY2UsIGN1cnJlbmN5OiAnSU5SJyxcbiAgICAgICAgICBjYXRlZ29yeTogY29udGV4dC5idWRnZXQsIHJhdGluZzogMy41ICsgaSAqIDAuNSwgYWRkcmVzczogYDEyMyBNYWluIFN0LCAke2NvbnRleHQudG8gfHwgJyd9YCxcbiAgICAgICAgICBkZWVwbGluazogYGh0dHBzOi8vbW9jay5ob3RlbHMvYm9vaz9kPSR7Y29udGV4dC50b30mcD0ke3ByaWNlfWAsIGltYWdlVXJsOiBgaHR0cHM6Ly9wbGFjZWhvbGQuY28vNDAweDIwMC83YzNhZWQvZmZmZmZmP3RleHQ9SG90ZWwrJHtpICsgMX1gLFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIGFzc2lzdGFudEZvbGxvd1VwOiB0cnVlLFxuICAgICAgICBhc2s6ICdncm91cFNpemUnLFxuICAgICAgICBtZXNzYWdlOiBcIlBlcmZlY3QuIEJhc2VkIG9uIHlvdXIgYnVkZ2V0LCBoZXJlIGFyZSBzb21lIGhvdGVsIG9wdGlvbnMuIFBsZWFzZSBzZWxlY3Qgb25lLiBOb3csIGp1c3QgdG8gY29uZmlybSwgaG93IG1hbnkgcGVvcGxlIGFyZSB0cmF2ZWxpbmc/XCIsXG4gICAgICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBhdmFpbGFibGVIb3RlbHM6IGhvdGVscyxcbiAgICAgICAgICB0cmFuc3BvcnQ6IGNvbnRleHQuZmxpZ2h0XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFNURVAgMTogU0VBUkNIIEZPUiBGTElHSFRTXG4gICAgLy8gQ29uZGl0aW9uOiBXZSBoYXZlIGVub3VnaCBpbmZvIGZvciBhIGZsaWdodCBzZWFyY2gsIGJ1dCBubyBmbGlnaHQgaGFzIGJlZW4gc2VsZWN0ZWQgeWV0LlxuICAgIGlmIChjb250ZXh0LmZyb20gJiYgY29udGV4dC50byAmJiBjb250ZXh0LmRhdGUgJiYgY29udGV4dC5tb2RlID09PSAnRmxpZ2h0JyAmJiAhY29udGV4dC5mbGlnaHQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGZsaWdodHM6IEZsaWdodERhdGFbXSA9IGF3YWl0IHNlYXJjaEZsaWdodHMoe1xuICAgICAgICAgIG9yaWdpbjogY29udGV4dC5mcm9tLCBkZXN0aW5hdGlvbjogY29udGV4dC50byxcbiAgICAgICAgICBkZXBhcnR1cmVEYXRlOiBjb250ZXh0LmRhdGUsIGFkdWx0czogY29udGV4dC5ncm91cFNpemUgfHwgMSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGZsaWdodHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgICBhc3Npc3RhbnRGb2xsb3dVcDogdHJ1ZSxcbiAgICAgICAgICAgIGFzazogJ2J1ZGdldCcsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkdyZWF0ISBJJ3ZlIGZvdW5kIHNldmVyYWwgZmxpZ2h0cyBmb3IgeW91LiBQbGVhc2Ugc2VsZWN0IG9uZS4gSW4gdGhlIG1lYW50aW1lLCB3aGF0J3MgeW91ciBidWRnZXQgZm9yIHRoZSB0cmlwP1wiLFxuICAgICAgICAgICAgY29udGV4dDogY29udGV4dCxcbiAgICAgICAgICAgIGRhdGE6IHsgYXZhaWxhYmxlRmxpZ2h0czogZmxpZ2h0cyB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogYEknbSBzb3JyeSwgSSBjb3VsZG4ndCBmaW5kIGFueSBmbGlnaHRzIGZyb20gJHtjb250ZXh0LmZyb219IHRvICR7Y29udGV4dC50b30gZm9yIHRoYXQgZGF0ZS4gV291bGQgeW91IGxpa2UgdG8gdHJ5IGEgZGlmZmVyZW50IGRhdGU/YCxcbiAgICAgICAgICAgIGNvbnRleHQ6IHsgLi4uY29udGV4dCwgZGF0ZTogdW5kZWZpbmVkIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBgRmxpZ2h0IHNlYXJjaCBmYWlsZWQ6ICR7ZS5tZXNzYWdlfWAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFNURVAgMzogRklOQUxJWkUgVEhFIFBMQU5cbiAgICBpZiAoY29udGV4dC5mbGlnaHQgJiYgY29udGV4dC5ob3RlbCAmJiBjb250ZXh0Lmdyb3VwU2l6ZSkge1xuICAgICAgICBjb25zdCBjYWJUb1N0YXRpb25QcmljZSA9IGdldFJhbmRvbVByaWNlKDQwMCwgNzAwKTtcbiAgICAgICAgY29uc3QgY2FiVG9Ib3RlbFByaWNlID0gZ2V0UmFuZG9tUHJpY2UoNTAwLCA4MDApO1xuICAgICAgICBjb25zdCB0b3RhbENvc3QgPSAoY29udGV4dC5mbGlnaHQucHJpY2UgKiBjb250ZXh0Lmdyb3VwU2l6ZSkgKyAoY29udGV4dC5ob3RlbC5wcmljZSAqIGNvbnRleHQuZ3JvdXBTaXplKSArIGNhYlRvU3RhdGlvblByaWNlICsgY2FiVG9Ib3RlbFByaWNlO1xuXG4gICAgICAgIGNvbnN0IGZpbmFsUGxhbjogVHJpcFBsYW5EYXRhID0ge1xuICAgICAgICAgICAgdHJhbnNwb3J0OiBjb250ZXh0LmZsaWdodCwgaG90ZWw6IGNvbnRleHQuaG90ZWwsXG4gICAgICAgICAgICBjYWJUb1N0YXRpb246IHsgbmFtZTogYENhYiB0byBBaXJwb3J0IGluICR7Y29udGV4dC5mcm9tfWAsIHByaWNlOiBjYWJUb1N0YXRpb25QcmljZSwgZGV0YWlsczogJ1N0YW5kYXJkIFJpZGUnIH0sXG4gICAgICAgICAgICBjYWJUb0hvdGVsOiB7IG5hbWU6IGBDYWIgZnJvbSBBaXJwb3J0IGluICR7Y29udGV4dC50b31gLCBwcmljZTogY2FiVG9Ib3RlbFByaWNlLCBkZXRhaWxzOiAnU3RhbmRhcmQgUmlkZScgfSxcbiAgICAgICAgICAgIGdyb3VwU2l6ZTogY29udGV4dC5ncm91cFNpemUsIHRvdGFsOiB0b3RhbENvc3QsXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiRXhjZWxsZW50ISBZb3VyIHBlcnNvbmFsaXplZCB0cmlwIGlzIGFsbCBwbGFubmVkIG91dC4gSGVyZSBpcyB0aGUgZmluYWwgc3VtbWFyeS5cIixcbiAgICAgICAgICAgIGRhdGE6IGZpbmFsUGxhbixcbiAgICAgICAgICAgIGNvbnRleHQ6IHsgbGFzdFBsYW5uZWRUcmlwOiBmaW5hbFBsYW4gfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyAtLS0gRkFMTEJBQ0s6IEFTSyBUSEUgTkVYVCBRVUVTVElPTiAtLS1cbiAgICBjb25zdCBzbG90czogKGtleW9mIFRyaXBDb250ZXh0KVtdID0gWydmcm9tJywgJ3RvJywgJ2RhdGUnLCAnbW9kZScsICdidWRnZXQnLCAnZ3JvdXBTaXplJ107XG4gICAgY29uc3QgbWlzc2luZyA9IHNsb3RzLmZpbmQoKGspID0+IGNvbnRleHRba10gPT0gbnVsbCk7XG5cbiAgICBpZiAobWlzc2luZykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgYXNzaXN0YW50Rm9sbG93VXA6IHRydWUsXG4gICAgICAgIGFzazogbWlzc2luZyxcbiAgICAgICAgY29udGV4dDogeyAuLi5jb250ZXh0LCBhc2s6IG1pc3NpbmcgfSxcbiAgICAgICAgbWVzc2FnZTogUVVFU1RJT05TW21pc3NpbmddLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6IFwiSSdtIG5vdCBzdXJlIHdoYXQgdG8gZG8gbmV4dC4gQ291bGQgeW91IHBsZWFzZSBjbGFyaWZ5P1wiLFxuICAgICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcihcIkFQSSBSb3V0ZSBFcnJvcjpcIiwgZXJyKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogZXJyLm1lc3NhZ2UgfHwgJ0FuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQuJyB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicGFyc2VUcmlwRGV0YWlscyIsInNlYXJjaEZsaWdodHMiLCJRVUVTVElPTlMiLCJmcm9tIiwidG8iLCJkYXRlIiwiYnVkZ2V0IiwiZ3JvdXBTaXplIiwibW9kZSIsImdldFJhbmRvbVByaWNlIiwibWluIiwibWF4IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiUE9TVCIsInJlcSIsIm1lc3NhZ2UiLCJjb250ZXh0IiwiY3R4SW4iLCJqc29uIiwidHJpbSIsImVycm9yIiwic3RhdHVzIiwicGFyc2VkIiwiY29uc29sZSIsImxvZyIsImZsaWdodCIsImhvdGVsIiwiaG90ZWxzIiwiQXJyYXkiLCJsZW5ndGgiLCJtYXAiLCJfIiwiaSIsImJhc2UiLCJwcmljZSIsImlkIiwibmFtZSIsImN1cnJlbmN5IiwiY2F0ZWdvcnkiLCJyYXRpbmciLCJhZGRyZXNzIiwiZGVlcGxpbmsiLCJpbWFnZVVybCIsImFzc2lzdGFudEZvbGxvd1VwIiwiYXNrIiwiZGF0YSIsImF2YWlsYWJsZUhvdGVscyIsInRyYW5zcG9ydCIsImZsaWdodHMiLCJvcmlnaW4iLCJkZXN0aW5hdGlvbiIsImRlcGFydHVyZURhdGUiLCJhZHVsdHMiLCJhdmFpbGFibGVGbGlnaHRzIiwic3VjY2VzcyIsInVuZGVmaW5lZCIsImUiLCJjYWJUb1N0YXRpb25QcmljZSIsImNhYlRvSG90ZWxQcmljZSIsInRvdGFsQ29zdCIsImZpbmFsUGxhbiIsImNhYlRvU3RhdGlvbiIsImRldGFpbHMiLCJjYWJUb0hvdGVsIiwidG90YWwiLCJsYXN0UGxhbm5lZFRyaXAiLCJzbG90cyIsIm1pc3NpbmciLCJmaW5kIiwiayIsImVyciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/trip/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/flightApi.ts":
/*!**************************!*\
  !*** ./lib/flightApi.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   searchFlights: () => (/* binding */ searchFlights)\n/* harmony export */ });\n// src/lib/flightApi.ts\n// This is the main function that will be called from your API route\nasync function searchFlights(params) {\n    // 1. Check for the API Key from your .env.local file\n    const apiKey = process.env.AVIATIONSTACK_API_KEY;\n    if (!apiKey) {\n        // If the key is missing, throw an error to stop the process\n        throw new Error('Flight API credentials are not configured.');\n    }\n    try {\n        // 2. We need to convert city names (like \"delhi\") to IATA codes (like \"DEL\").\n        // For this example, we'll use a simple hardcoded mapping.\n        // In a real app, you might use another API for this conversion.\n        const originIata = getIataCode(params.origin);\n        const destinationIata = getIataCode(params.destination);\n        if (!originIata || !destinationIata) {\n            throw new Error('Could not find airport code for the specified city.');\n        }\n        // 3. Construct the API URL with the search parameters\n        const apiUrl = `https://api.aviationstack.com/v1/flights?access_key=${apiKey}&dep_iata=${originIata}&arr_iata=${destinationIata}`;\n        // 4. Make the actual API call\n        const response = await fetch(apiUrl);\n        const result = await response.json();\n        if (!response.ok || !result.data) {\n            console.error(\"AviationStack API Error:\", result.error?.info);\n            throw new Error(result.error?.info || 'Failed to fetch flight data.');\n        }\n        // 5. Format the API response to match your app's FlightData interface\n        // The free AviationStack plan often returns limited live data, so we map what we can\n        // and add some mock data for fields that might be missing.\n        const flights = result.data.slice(0, 5).map((flight, index)=>({\n                id: flight.flight.iata || `flight_${index}`,\n                airline: flight.airline.name || 'Unknown Airline',\n                flightNumber: flight.flight.number || 'N/A',\n                departureAirportIata: flight.departure.iata,\n                arrivalAirportIata: flight.arrival.iata,\n                departureTime: new Date(flight.departure.scheduled).toLocaleTimeString([], {\n                    hour: '2-digit',\n                    minute: '2-digit'\n                }),\n                arrivalTime: new Date(flight.arrival.scheduled).toLocaleTimeString([], {\n                    hour: '2-digit',\n                    minute: '2-digit'\n                }),\n                duration: '3h 15m',\n                price: Math.floor(Math.random() * (8000 - 4500 + 1)) + 4500,\n                currency: 'INR',\n                deeplink: `https://www.google.com/flights?q=flights+from+${originIata}+to+${destinationIata}`,\n                stops: flight.departure.delay != null ? 1 : 0\n            }));\n        return flights;\n    } catch (error) {\n        console.error('Error in searchFlights:', error);\n        // Re-throw the error so the API route can handle it\n        throw error;\n    }\n}\n// Helper function to get IATA codes.\nfunction getIataCode(city) {\n    const cityLower = city.toLowerCase();\n    const iataMap = {\n        'delhi': 'DEL',\n        'mumbai': 'BOM',\n        'bengaluru': 'BLR',\n        'chennai': 'MAA',\n        'kolkata': 'CCU'\n    };\n    return iataMap[cityLower] || null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aXB5L2xpYi9mbGlnaHRBcGkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2xpYi9mbGlnaHRBcGkudHNcbmltcG9ydCB7IEZsaWdodERhdGEgfSBmcm9tICcuLi90eXBlcyc7XG5cbi8vIFRoaXMgaW50ZXJmYWNlIGRlZmluZXMgdGhlIHN0cnVjdHVyZSBvZiB0aGUgc2VhcmNoIHBhcmFtZXRlcnNcbmludGVyZmFjZSBGbGlnaHRTZWFyY2hQYXJhbXMge1xuICBvcmlnaW46IHN0cmluZztcbiAgZGVzdGluYXRpb246IHN0cmluZztcbiAgZGVwYXJ0dXJlRGF0ZTogc3RyaW5nO1xuICBhZHVsdHM6IG51bWJlcjtcbn1cblxuLy8gVGhpcyBpcyB0aGUgbWFpbiBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIGZyb20geW91ciBBUEkgcm91dGVcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWFyY2hGbGlnaHRzKHBhcmFtczogRmxpZ2h0U2VhcmNoUGFyYW1zKTogUHJvbWlzZTxGbGlnaHREYXRhW10+IHtcbiAgLy8gMS4gQ2hlY2sgZm9yIHRoZSBBUEkgS2V5IGZyb20geW91ciAuZW52LmxvY2FsIGZpbGVcbiAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuQVZJQVRJT05TVEFDS19BUElfS0VZO1xuICBpZiAoIWFwaUtleSkge1xuICAgIC8vIElmIHRoZSBrZXkgaXMgbWlzc2luZywgdGhyb3cgYW4gZXJyb3IgdG8gc3RvcCB0aGUgcHJvY2Vzc1xuICAgIHRocm93IG5ldyBFcnJvcignRmxpZ2h0IEFQSSBjcmVkZW50aWFscyBhcmUgbm90IGNvbmZpZ3VyZWQuJyk7XG4gIH1cblxuICB0cnkge1xuICAgIC8vIDIuIFdlIG5lZWQgdG8gY29udmVydCBjaXR5IG5hbWVzIChsaWtlIFwiZGVsaGlcIikgdG8gSUFUQSBjb2RlcyAobGlrZSBcIkRFTFwiKS5cbiAgICAvLyBGb3IgdGhpcyBleGFtcGxlLCB3ZSdsbCB1c2UgYSBzaW1wbGUgaGFyZGNvZGVkIG1hcHBpbmcuXG4gICAgLy8gSW4gYSByZWFsIGFwcCwgeW91IG1pZ2h0IHVzZSBhbm90aGVyIEFQSSBmb3IgdGhpcyBjb252ZXJzaW9uLlxuICAgIGNvbnN0IG9yaWdpbklhdGEgPSBnZXRJYXRhQ29kZShwYXJhbXMub3JpZ2luKTtcbiAgICBjb25zdCBkZXN0aW5hdGlvbklhdGEgPSBnZXRJYXRhQ29kZShwYXJhbXMuZGVzdGluYXRpb24pO1xuXG4gICAgaWYgKCFvcmlnaW5JYXRhIHx8ICFkZXN0aW5hdGlvbklhdGEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGZpbmQgYWlycG9ydCBjb2RlIGZvciB0aGUgc3BlY2lmaWVkIGNpdHkuJyk7XG4gICAgfVxuXG4gICAgLy8gMy4gQ29uc3RydWN0IHRoZSBBUEkgVVJMIHdpdGggdGhlIHNlYXJjaCBwYXJhbWV0ZXJzXG4gICAgY29uc3QgYXBpVXJsID0gYGh0dHBzOi8vYXBpLmF2aWF0aW9uc3RhY2suY29tL3YxL2ZsaWdodHM/YWNjZXNzX2tleT0ke2FwaUtleX0mZGVwX2lhdGE9JHtvcmlnaW5JYXRhfSZhcnJfaWF0YT0ke2Rlc3RpbmF0aW9uSWF0YX1gO1xuXG4gICAgLy8gNC4gTWFrZSB0aGUgYWN0dWFsIEFQSSBjYWxsXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChhcGlVcmwpO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgIGlmICghcmVzcG9uc2Uub2sgfHwgIXJlc3VsdC5kYXRhKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiQXZpYXRpb25TdGFjayBBUEkgRXJyb3I6XCIsIHJlc3VsdC5lcnJvcj8uaW5mbyk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IocmVzdWx0LmVycm9yPy5pbmZvIHx8ICdGYWlsZWQgdG8gZmV0Y2ggZmxpZ2h0IGRhdGEuJyk7XG4gICAgfVxuXG4gICAgLy8gNS4gRm9ybWF0IHRoZSBBUEkgcmVzcG9uc2UgdG8gbWF0Y2ggeW91ciBhcHAncyBGbGlnaHREYXRhIGludGVyZmFjZVxuICAgIC8vIFRoZSBmcmVlIEF2aWF0aW9uU3RhY2sgcGxhbiBvZnRlbiByZXR1cm5zIGxpbWl0ZWQgbGl2ZSBkYXRhLCBzbyB3ZSBtYXAgd2hhdCB3ZSBjYW5cbiAgICAvLyBhbmQgYWRkIHNvbWUgbW9jayBkYXRhIGZvciBmaWVsZHMgdGhhdCBtaWdodCBiZSBtaXNzaW5nLlxuICAgIGNvbnN0IGZsaWdodHM6IEZsaWdodERhdGFbXSA9IHJlc3VsdC5kYXRhLnNsaWNlKDAsIDUpLm1hcCgoZmxpZ2h0OiBhbnksIGluZGV4OiBudW1iZXIpID0+ICh7XG4gICAgICBpZDogZmxpZ2h0LmZsaWdodC5pYXRhIHx8IGBmbGlnaHRfJHtpbmRleH1gLFxuICAgICAgYWlybGluZTogZmxpZ2h0LmFpcmxpbmUubmFtZSB8fCAnVW5rbm93biBBaXJsaW5lJyxcbiAgICAgIGZsaWdodE51bWJlcjogZmxpZ2h0LmZsaWdodC5udW1iZXIgfHwgJ04vQScsXG4gICAgICBkZXBhcnR1cmVBaXJwb3J0SWF0YTogZmxpZ2h0LmRlcGFydHVyZS5pYXRhLFxuICAgICAgYXJyaXZhbEFpcnBvcnRJYXRhOiBmbGlnaHQuYXJyaXZhbC5pYXRhLFxuICAgICAgZGVwYXJ0dXJlVGltZTogbmV3IERhdGUoZmxpZ2h0LmRlcGFydHVyZS5zY2hlZHVsZWQpLnRvTG9jYWxlVGltZVN0cmluZyhbXSwgeyBob3VyOiAnMi1kaWdpdCcsIG1pbnV0ZTogJzItZGlnaXQnIH0pLFxuICAgICAgYXJyaXZhbFRpbWU6IG5ldyBEYXRlKGZsaWdodC5hcnJpdmFsLnNjaGVkdWxlZCkudG9Mb2NhbGVUaW1lU3RyaW5nKFtdLCB7IGhvdXI6ICcyLWRpZ2l0JywgbWludXRlOiAnMi1kaWdpdCcgfSksXG4gICAgICBkdXJhdGlvbjogJzNoIDE1bScsIC8vIE1vY2sgZGF0YVxuICAgICAgcHJpY2U6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICg4MDAwIC0gNDUwMCArIDEpKSArIDQ1MDAsIC8vIE1vY2sgcHJpY2VcbiAgICAgIGN1cnJlbmN5OiAnSU5SJyxcbiAgICAgIGRlZXBsaW5rOiBgaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9mbGlnaHRzP3E9ZmxpZ2h0cytmcm9tKyR7b3JpZ2luSWF0YX0rdG8rJHtkZXN0aW5hdGlvbklhdGF9YCwgLy8gRXhhbXBsZSBkZWVwbGlua1xuICAgICAgc3RvcHM6IGZsaWdodC5kZXBhcnR1cmUuZGVsYXkgIT0gbnVsbCA/IDEgOiAwLCAvLyBFeGFtcGxlIGxvZ2ljIGZvciBzdG9wc1xuICAgIH0pKTtcblxuICAgIHJldHVybiBmbGlnaHRzO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gc2VhcmNoRmxpZ2h0czonLCBlcnJvcik7XG4gICAgLy8gUmUtdGhyb3cgdGhlIGVycm9yIHNvIHRoZSBBUEkgcm91dGUgY2FuIGhhbmRsZSBpdFxuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgSUFUQSBjb2Rlcy5cbmZ1bmN0aW9uIGdldElhdGFDb2RlKGNpdHk6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAgIGNvbnN0IGNpdHlMb3dlciA9IGNpdHkudG9Mb3dlckNhc2UoKTtcbiAgICBjb25zdCBpYXRhTWFwOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xuICAgICAgICAnZGVsaGknOiAnREVMJyxcbiAgICAgICAgJ211bWJhaSc6ICdCT00nLFxuICAgICAgICAnYmVuZ2FsdXJ1JzogJ0JMUicsXG4gICAgICAgICdjaGVubmFpJzogJ01BQScsXG4gICAgICAgICdrb2xrYXRhJzogJ0NDVScsXG4gICAgICAgIC8vIEFkZCBtb3JlIGNpdGllcyBhcyBuZWVkZWRcbiAgICB9O1xuICAgIHJldHVybiBpYXRhTWFwW2NpdHlMb3dlcl0gfHwgbnVsbDtcbn1cbiJdLCJuYW1lcyI6WyJzZWFyY2hGbGlnaHRzIiwicGFyYW1zIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIkFWSUFUSU9OU1RBQ0tfQVBJX0tFWSIsIkVycm9yIiwib3JpZ2luSWF0YSIsImdldElhdGFDb2RlIiwib3JpZ2luIiwiZGVzdGluYXRpb25JYXRhIiwiZGVzdGluYXRpb24iLCJhcGlVcmwiLCJyZXNwb25zZSIsImZldGNoIiwicmVzdWx0IiwianNvbiIsIm9rIiwiZGF0YSIsImNvbnNvbGUiLCJlcnJvciIsImluZm8iLCJmbGlnaHRzIiwic2xpY2UiLCJtYXAiLCJmbGlnaHQiLCJpbmRleCIsImlkIiwiaWF0YSIsImFpcmxpbmUiLCJuYW1lIiwiZmxpZ2h0TnVtYmVyIiwibnVtYmVyIiwiZGVwYXJ0dXJlQWlycG9ydElhdGEiLCJkZXBhcnR1cmUiLCJhcnJpdmFsQWlycG9ydElhdGEiLCJhcnJpdmFsIiwiZGVwYXJ0dXJlVGltZSIsIkRhdGUiLCJzY2hlZHVsZWQiLCJ0b0xvY2FsZVRpbWVTdHJpbmciLCJob3VyIiwibWludXRlIiwiYXJyaXZhbFRpbWUiLCJkdXJhdGlvbiIsInByaWNlIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiY3VycmVuY3kiLCJkZWVwbGluayIsInN0b3BzIiwiZGVsYXkiLCJjaXR5IiwiY2l0eUxvd2VyIiwidG9Mb3dlckNhc2UiLCJpYXRhTWFwIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/flightApi.ts\n");

/***/ }),

/***/ "(rsc)/./lib/nlpParser.ts":
/*!**************************!*\
  !*** ./lib/nlpParser.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseTripDetails: () => (/* binding */ parseTripDetails)\n/* harmony export */ });\n// src/lib/nlpParser.ts\n// This file integrates with the Gemini API for natural language processing.\n/**\n * Parses user messages using the Gemini API to extract trip details and intent.\n * @param message The user's input message.\n * @returns A promise that resolves to ParsedTripDetails.\n */ async function parseTripDetails(message) {\n    const apiKey = process.env.GEMINI_API_KEY; // Get API key from environment variables\n    if (!apiKey) {\n        console.error(\"GEMINI_API_KEY is not set in your environment variables (.env.local).\");\n        // Return a structured error response if API key is missing\n        return {\n            intent: 'error',\n            message: 'API key for NLP is missing. Please configure it.',\n            from: null,\n            to: null,\n            date: null,\n            budget: null,\n            mode: null,\n            groupSize: null\n        };\n    }\n    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;\n    // IMPORTANT: The system prompt is crucial for Gemini's output format.\n    // Ensure it strongly enforces JSON output with 'null' for missing fields.\n    const systemPrompt = `You are a precise travel information extraction API. Extract the following from user's message:\n- from: Origin city (e.g., \"New Delhi\")\n- to: Destination city (e.g., \"Mumbai\")\n- date: Date of travel (e.g., \"25th December\", \"tomorrow\", \"August 18 2025\")\n- budget: One of Luxury, Medium, Budget-friendly\n- mode: One of Train, Bus, Flight\n- groupSize: Number of people (e.g., 1, 2, 5)\n- intent: 'book_trip' if the user wants to plan or book a trip, 'display_trip' if they want to see a previous trip, 'cancel_trip' if they want to clear the current plan, 'greet' for greetings (e.g., \"hi\", \"hello\").\n- message: An optional, brief confirmation or error message (e.g., \"Understood!\", \"Please clarify the date.\").\n\nReturn only JSON as per this schema with no markdown or extra text. If a field is not found, set its value to null.`;\n    const payload = {\n        contents: [\n            {\n                role: \"user\",\n                parts: [\n                    {\n                        text: `${systemPrompt}\\n\\nUser message: \"${message}\"`\n                    }\n                ]\n            }\n        ],\n        generationConfig: {\n            responseMimeType: \"application/json\",\n            responseSchema: {\n                type: \"OBJECT\",\n                properties: {\n                    from: {\n                        type: \"STRING\",\n                        nullable: true\n                    },\n                    to: {\n                        type: \"STRING\",\n                        nullable: true\n                    },\n                    date: {\n                        type: \"STRING\",\n                        nullable: true\n                    },\n                    budget: {\n                        type: \"STRING\",\n                        enum: [\n                            \"Luxury\",\n                            \"Medium\",\n                            \"Budget-friendly\"\n                        ],\n                        nullable: true\n                    },\n                    mode: {\n                        type: \"STRING\",\n                        enum: [\n                            \"Train\",\n                            \"Bus\",\n                            \"Flight\"\n                        ],\n                        nullable: true\n                    },\n                    groupSize: {\n                        type: \"NUMBER\",\n                        nullable: true\n                    },\n                    intent: {\n                        type: \"STRING\",\n                        enum: [\n                            \"book_trip\",\n                            \"display_trip\",\n                            \"cancel_trip\",\n                            \"greet\",\n                            \"error\",\n                            \"unknown\"\n                        ] // Ensure all intents are covered\n                    },\n                    message: {\n                        type: \"STRING\",\n                        nullable: true\n                    }\n                },\n                required: [\n                    \"intent\"\n                ]\n            }\n        }\n    };\n    try {\n        const res = await fetch(apiUrl, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(payload)\n        });\n        if (!res.ok) {\n            const errText = await res.text();\n            console.error(\"Gemini API failed:\", res.status, errText);\n            // Return a structured error response if Gemini API fails\n            return {\n                intent: 'error',\n                message: `NLP service error: ${res.statusText}. Details: ${errText.substring(0, 150)}`,\n                from: null,\n                to: null,\n                date: null,\n                budget: null,\n                mode: null,\n                groupSize: null\n            };\n        }\n        const contentType = res.headers.get(\"content-type\");\n        if (!contentType || !contentType.includes(\"application/json\")) {\n            const rawText = await res.text();\n            console.error(\"Gemini API did not return JSON. Content-Type:\", contentType, \"Raw body:\", rawText);\n            // Fallback for non-JSON response from Gemini\n            return {\n                intent: 'error',\n                message: 'NLP service returned an invalid response format.',\n                from: null,\n                to: null,\n                date: null,\n                budget: null,\n                mode: null,\n                groupSize: null\n            };\n        }\n        const result = await res.json();\n        // Gemini 2.0 Flash with responseSchema directly returns the JSON object in 'text' part\n        const part = result.candidates?.[0]?.content?.parts?.[0]?.text;\n        if (!part) {\n            console.warn(\"Gemini API returned no text content or candidates.\");\n            // Return a default 'unknown' intent with a helpful message\n            return {\n                intent: 'unknown',\n                message: 'I could not extract specific information from your message. Can you please rephrase?',\n                from: null,\n                to: null,\n                date: null,\n                budget: null,\n                mode: null,\n                groupSize: null\n            };\n        }\n        let raw = part.trim();\n        // Clean up markdown code block if present (Gemini with responseSchema often omits this, but good to keep)\n        if (raw.startsWith('```json')) raw = raw.slice(7, -3).trim();\n        else if (raw.startsWith('```')) raw = raw.slice(3, -3).trim();\n        // Replace \"null\" strings with actual null values for JSON parsing, if Gemini outputs them as strings\n        const cleanJson = raw.replace(/: \"null\"/g, \": null\");\n        let parsedData;\n        try {\n            parsedData = JSON.parse(cleanJson);\n        } catch (parseError) {\n            console.error(\"Failed to parse Gemini's JSON response:\", parseError, \"Raw:\", cleanJson);\n            return {\n                intent: 'error',\n                message: 'NLP service returned malformed JSON. Please try again.',\n                from: null,\n                to: null,\n                date: null,\n                budget: null,\n                mode: null,\n                groupSize: null\n            };\n        }\n        // Ensure numeric fields are correctly parsed if they come as strings (Gemini's responseSchema helps, but defensive)\n        if (typeof parsedData.groupSize === 'string') {\n            parsedData.groupSize = parseInt(parsedData.groupSize, 10);\n            if (isNaN(parsedData.groupSize)) parsedData.groupSize = null;\n        }\n        // Ensure all optional fields are explicitly null if they are undefined in the parsed data\n        // This makes the ParsedTripDetails object predictable for the rest of the application.\n        parsedData.from = parsedData.from === undefined ? null : parsedData.from;\n        parsedData.to = parsedData.to === undefined ? null : parsedData.to;\n        parsedData.date = parsedData.date === undefined ? null : parsedData.date;\n        parsedData.budget = parsedData.budget === undefined ? null : parsedData.budget;\n        parsedData.mode = parsedData.mode === undefined ? null : parsedData.mode;\n        parsedData.groupSize = parsedData.groupSize === undefined ? null : parsedData.groupSize;\n        parsedData.message = parsedData.message === undefined ? null : parsedData.message; // Ensure message is null if undefined\n        // Defensive check: ensure intent is always valid or defaults to 'unknown'\n        const validIntents = [\n            \"book_trip\",\n            \"display_trip\",\n            \"cancel_trip\",\n            \"greet\",\n            \"error\",\n            \"unknown\"\n        ];\n        if (!parsedData.intent || !validIntents.includes(parsedData.intent)) {\n            console.warn(`NLP returned an invalid or missing intent: \"${parsedData.intent}\". Defaulting to 'unknown'.`);\n            parsedData.intent = 'unknown';\n            parsedData.message = parsedData.message || 'I could not determine your intent. Can you please rephrase?';\n        }\n        console.log(' NLP parse successful:', parsedData);\n        return parsedData;\n    } catch (error) {\n        console.error(' NLP parse failed:', error);\n        // Return an 'error' intent with the error message and all fields explicitly null\n        return {\n            intent: 'error',\n            message: error.message || 'An unexpected error occurred during NLP parsing.',\n            from: null,\n            to: null,\n            date: null,\n            budget: null,\n            mode: null,\n            groupSize: null\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUMsMkJBQTJCLENBQUM7WUFDMUdrRCxXQUFXbEQsTUFBTSxHQUFHO1lBQ3BCa0QsV0FBV3pELE9BQU8sR0FBR3lELFdBQVd6RCxPQUFPLElBQUk7UUFDL0M7UUFHQUssUUFBUTJELEdBQUcsQ0FBQywyQkFBMkJQO1FBQ3ZDLE9BQU9BO0lBQ1QsRUFBRSxPQUFPbkQsT0FBWTtRQUNuQkQsUUFBUUMsS0FBSyxDQUFDLHVCQUF1QkE7UUFDckMsaUZBQWlGO1FBQ2pGLE9BQU87WUFDTEMsUUFBUTtZQUNSUCxTQUFTTSxNQUFNTixPQUFPLElBQUk7WUFDMUJRLE1BQU07WUFBTUMsSUFBSTtZQUFNQyxNQUFNO1lBQU1DLFFBQVE7WUFBTUMsTUFBTTtZQUFNQyxXQUFXO1FBQ3pFO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL3N1cmFqcmF3YXQvRG93bmxvYWRzL1RyaXB5L2xpYi9ubHBQYXJzZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2xpYi9ubHBQYXJzZXIudHNcbi8vIFRoaXMgZmlsZSBpbnRlZ3JhdGVzIHdpdGggdGhlIEdlbWluaSBBUEkgZm9yIG5hdHVyYWwgbGFuZ3VhZ2UgcHJvY2Vzc2luZy5cblxuaW1wb3J0IHsgUGFyc2VkVHJpcERldGFpbHMgfSBmcm9tICcuLi90eXBlcyc7IC8vIEltcG9ydCBQYXJzZWRUcmlwRGV0YWlsc1xuXG4vKipcbiAqIFBhcnNlcyB1c2VyIG1lc3NhZ2VzIHVzaW5nIHRoZSBHZW1pbmkgQVBJIHRvIGV4dHJhY3QgdHJpcCBkZXRhaWxzIGFuZCBpbnRlbnQuXG4gKiBAcGFyYW0gbWVzc2FnZSBUaGUgdXNlcidzIGlucHV0IG1lc3NhZ2UuXG4gKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBQYXJzZWRUcmlwRGV0YWlscy5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHBhcnNlVHJpcERldGFpbHMobWVzc2FnZTogc3RyaW5nKTogUHJvbWlzZTxQYXJzZWRUcmlwRGV0YWlscz4ge1xuICBjb25zdCBhcGlLZXkgPSBwcm9jZXNzLmVudi5HRU1JTklfQVBJX0tFWTsgLy8gR2V0IEFQSSBrZXkgZnJvbSBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbiAgaWYgKCFhcGlLZXkpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiR0VNSU5JX0FQSV9LRVkgaXMgbm90IHNldCBpbiB5b3VyIGVudmlyb25tZW50IHZhcmlhYmxlcyAoLmVudi5sb2NhbCkuXCIpO1xuICAgIC8vIFJldHVybiBhIHN0cnVjdHVyZWQgZXJyb3IgcmVzcG9uc2UgaWYgQVBJIGtleSBpcyBtaXNzaW5nXG4gICAgcmV0dXJuIHtcbiAgICAgIGludGVudDogJ2Vycm9yJyxcbiAgICAgIG1lc3NhZ2U6ICdBUEkga2V5IGZvciBOTFAgaXMgbWlzc2luZy4gUGxlYXNlIGNvbmZpZ3VyZSBpdC4nLCAvLyBNZXNzYWdlIGlzIGEgc3RyaW5nXG4gICAgICBmcm9tOiBudWxsLCB0bzogbnVsbCwgZGF0ZTogbnVsbCwgYnVkZ2V0OiBudWxsLCBtb2RlOiBudWxsLCBncm91cFNpemU6IG51bGxcbiAgICB9O1xuICB9XG5cbiAgY29uc3QgYXBpVXJsID0gYGh0dHBzOi8vZ2VuZXJhdGl2ZWxhbmd1YWdlLmdvb2dsZWFwaXMuY29tL3YxYmV0YS9tb2RlbHMvZ2VtaW5pLTIuMC1mbGFzaDpnZW5lcmF0ZUNvbnRlbnQ/a2V5PSR7YXBpS2V5fWA7XG5cbiAgLy8gSU1QT1JUQU5UOiBUaGUgc3lzdGVtIHByb21wdCBpcyBjcnVjaWFsIGZvciBHZW1pbmkncyBvdXRwdXQgZm9ybWF0LlxuICAvLyBFbnN1cmUgaXQgc3Ryb25nbHkgZW5mb3JjZXMgSlNPTiBvdXRwdXQgd2l0aCAnbnVsbCcgZm9yIG1pc3NpbmcgZmllbGRzLlxuICBjb25zdCBzeXN0ZW1Qcm9tcHQgPSBgWW91IGFyZSBhIHByZWNpc2UgdHJhdmVsIGluZm9ybWF0aW9uIGV4dHJhY3Rpb24gQVBJLiBFeHRyYWN0IHRoZSBmb2xsb3dpbmcgZnJvbSB1c2VyJ3MgbWVzc2FnZTpcbi0gZnJvbTogT3JpZ2luIGNpdHkgKGUuZy4sIFwiTmV3IERlbGhpXCIpXG4tIHRvOiBEZXN0aW5hdGlvbiBjaXR5IChlLmcuLCBcIk11bWJhaVwiKVxuLSBkYXRlOiBEYXRlIG9mIHRyYXZlbCAoZS5nLiwgXCIyNXRoIERlY2VtYmVyXCIsIFwidG9tb3Jyb3dcIiwgXCJBdWd1c3QgMTggMjAyNVwiKVxuLSBidWRnZXQ6IE9uZSBvZiBMdXh1cnksIE1lZGl1bSwgQnVkZ2V0LWZyaWVuZGx5XG4tIG1vZGU6IE9uZSBvZiBUcmFpbiwgQnVzLCBGbGlnaHRcbi0gZ3JvdXBTaXplOiBOdW1iZXIgb2YgcGVvcGxlIChlLmcuLCAxLCAyLCA1KVxuLSBpbnRlbnQ6ICdib29rX3RyaXAnIGlmIHRoZSB1c2VyIHdhbnRzIHRvIHBsYW4gb3IgYm9vayBhIHRyaXAsICdkaXNwbGF5X3RyaXAnIGlmIHRoZXkgd2FudCB0byBzZWUgYSBwcmV2aW91cyB0cmlwLCAnY2FuY2VsX3RyaXAnIGlmIHRoZXkgd2FudCB0byBjbGVhciB0aGUgY3VycmVudCBwbGFuLCAnZ3JlZXQnIGZvciBncmVldGluZ3MgKGUuZy4sIFwiaGlcIiwgXCJoZWxsb1wiKS5cbi0gbWVzc2FnZTogQW4gb3B0aW9uYWwsIGJyaWVmIGNvbmZpcm1hdGlvbiBvciBlcnJvciBtZXNzYWdlIChlLmcuLCBcIlVuZGVyc3Rvb2QhXCIsIFwiUGxlYXNlIGNsYXJpZnkgdGhlIGRhdGUuXCIpLlxuXG5SZXR1cm4gb25seSBKU09OIGFzIHBlciB0aGlzIHNjaGVtYSB3aXRoIG5vIG1hcmtkb3duIG9yIGV4dHJhIHRleHQuIElmIGEgZmllbGQgaXMgbm90IGZvdW5kLCBzZXQgaXRzIHZhbHVlIHRvIG51bGwuYDtcblxuICBjb25zdCBwYXlsb2FkID0ge1xuICAgIGNvbnRlbnRzOiBbXG4gICAgICB7XG4gICAgICAgIHJvbGU6IFwidXNlclwiLFxuICAgICAgICBwYXJ0czogW3sgdGV4dDogYCR7c3lzdGVtUHJvbXB0fVxcblxcblVzZXIgbWVzc2FnZTogXCIke21lc3NhZ2V9XCJgIH1dLFxuICAgICAgfSxcbiAgICBdLFxuICAgIGdlbmVyYXRpb25Db25maWc6IHtcbiAgICAgIHJlc3BvbnNlTWltZVR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgcmVzcG9uc2VTY2hlbWE6IHtcbiAgICAgICAgdHlwZTogXCJPQkpFQ1RcIixcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIGZyb206IHsgdHlwZTogXCJTVFJJTkdcIiwgbnVsbGFibGU6IHRydWUgfSxcbiAgICAgICAgICB0bzogeyB0eXBlOiBcIlNUUklOR1wiLCBudWxsYWJsZTogdHJ1ZSB9LFxuICAgICAgICAgIGRhdGU6IHsgdHlwZTogXCJTVFJJTkdcIiwgbnVsbGFibGU6IHRydWUgfSxcbiAgICAgICAgICBidWRnZXQ6IHtcbiAgICAgICAgICAgIHR5cGU6IFwiU1RSSU5HXCIsXG4gICAgICAgICAgICBlbnVtOiBbXCJMdXh1cnlcIiwgXCJNZWRpdW1cIiwgXCJCdWRnZXQtZnJpZW5kbHlcIl0sXG4gICAgICAgICAgICBudWxsYWJsZTogdHJ1ZSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIG1vZGU6IHtcbiAgICAgICAgICAgIHR5cGU6IFwiU1RSSU5HXCIsXG4gICAgICAgICAgICBlbnVtOiBbXCJUcmFpblwiLCBcIkJ1c1wiLCBcIkZsaWdodFwiXSxcbiAgICAgICAgICAgIG51bGxhYmxlOiB0cnVlLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZ3JvdXBTaXplOiB7IHR5cGU6IFwiTlVNQkVSXCIsIG51bGxhYmxlOiB0cnVlIH0sXG4gICAgICAgICAgaW50ZW50OiB7XG4gICAgICAgICAgICB0eXBlOiBcIlNUUklOR1wiLFxuICAgICAgICAgICAgZW51bTogW1wiYm9va190cmlwXCIsIFwiZGlzcGxheV90cmlwXCIsIFwiY2FuY2VsX3RyaXBcIiwgXCJncmVldFwiLCBcImVycm9yXCIsIFwidW5rbm93blwiXSAvLyBFbnN1cmUgYWxsIGludGVudHMgYXJlIGNvdmVyZWRcbiAgICAgICAgICB9LFxuICAgICAgICAgIG1lc3NhZ2U6IHsgdHlwZTogXCJTVFJJTkdcIiwgbnVsbGFibGU6IHRydWUgfSxcbiAgICAgICAgfSxcbiAgICAgICAgcmVxdWlyZWQ6IFtcImludGVudFwiXSwgLy8gT25seSBpbnRlbnQgaXMgc3RyaWN0bHkgcmVxdWlyZWQgYnkgc2NoZW1hXG4gICAgICB9LFxuICAgIH0sXG4gIH07XG5cbiAgdHJ5IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChhcGlVcmwsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSxcbiAgICB9KTtcblxuICAgIGlmICghcmVzLm9rKSB7XG4gICAgICBjb25zdCBlcnJUZXh0ID0gYXdhaXQgcmVzLnRleHQoKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJHZW1pbmkgQVBJIGZhaWxlZDpcIiwgcmVzLnN0YXR1cywgZXJyVGV4dCk7XG4gICAgICAvLyBSZXR1cm4gYSBzdHJ1Y3R1cmVkIGVycm9yIHJlc3BvbnNlIGlmIEdlbWluaSBBUEkgZmFpbHNcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGludGVudDogJ2Vycm9yJyxcbiAgICAgICAgbWVzc2FnZTogYE5MUCBzZXJ2aWNlIGVycm9yOiAke3Jlcy5zdGF0dXNUZXh0fS4gRGV0YWlsczogJHtlcnJUZXh0LnN1YnN0cmluZygwLCAxNTApfWAsXG4gICAgICAgIGZyb206IG51bGwsIHRvOiBudWxsLCBkYXRlOiBudWxsLCBidWRnZXQ6IG51bGwsIG1vZGU6IG51bGwsIGdyb3VwU2l6ZTogbnVsbFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBjb250ZW50VHlwZSA9IHJlcy5oZWFkZXJzLmdldChcImNvbnRlbnQtdHlwZVwiKTtcbiAgICBpZiAoIWNvbnRlbnRUeXBlIHx8ICFjb250ZW50VHlwZS5pbmNsdWRlcyhcImFwcGxpY2F0aW9uL2pzb25cIikpIHtcbiAgICAgICAgY29uc3QgcmF3VGV4dCA9IGF3YWl0IHJlcy50ZXh0KCk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJHZW1pbmkgQVBJIGRpZCBub3QgcmV0dXJuIEpTT04uIENvbnRlbnQtVHlwZTpcIiwgY29udGVudFR5cGUsIFwiUmF3IGJvZHk6XCIsIHJhd1RleHQpO1xuICAgICAgICAvLyBGYWxsYmFjayBmb3Igbm9uLUpTT04gcmVzcG9uc2UgZnJvbSBHZW1pbmlcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpbnRlbnQ6ICdlcnJvcicsXG4gICAgICAgICAgbWVzc2FnZTogJ05MUCBzZXJ2aWNlIHJldHVybmVkIGFuIGludmFsaWQgcmVzcG9uc2UgZm9ybWF0LicsXG4gICAgICAgICAgZnJvbTogbnVsbCwgdG86IG51bGwsIGRhdGU6IG51bGwsIGJ1ZGdldDogbnVsbCwgbW9kZTogbnVsbCwgZ3JvdXBTaXplOiBudWxsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAvLyBHZW1pbmkgMi4wIEZsYXNoIHdpdGggcmVzcG9uc2VTY2hlbWEgZGlyZWN0bHkgcmV0dXJucyB0aGUgSlNPTiBvYmplY3QgaW4gJ3RleHQnIHBhcnRcbiAgICBjb25zdCBwYXJ0ID0gcmVzdWx0LmNhbmRpZGF0ZXM/LlswXT8uY29udGVudD8ucGFydHM/LlswXT8udGV4dDtcblxuICAgIGlmICghcGFydCkge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJHZW1pbmkgQVBJIHJldHVybmVkIG5vIHRleHQgY29udGVudCBvciBjYW5kaWRhdGVzLlwiKTtcbiAgICAgICAgLy8gUmV0dXJuIGEgZGVmYXVsdCAndW5rbm93bicgaW50ZW50IHdpdGggYSBoZWxwZnVsIG1lc3NhZ2VcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpbnRlbnQ6ICd1bmtub3duJyxcbiAgICAgICAgICBtZXNzYWdlOiAnSSBjb3VsZCBub3QgZXh0cmFjdCBzcGVjaWZpYyBpbmZvcm1hdGlvbiBmcm9tIHlvdXIgbWVzc2FnZS4gQ2FuIHlvdSBwbGVhc2UgcmVwaHJhc2U/JyxcbiAgICAgICAgICBmcm9tOiBudWxsLCB0bzogbnVsbCwgZGF0ZTogbnVsbCwgYnVkZ2V0OiBudWxsLCBtb2RlOiBudWxsLCBncm91cFNpemU6IG51bGxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBsZXQgcmF3ID0gcGFydC50cmltKCk7XG4gICAgLy8gQ2xlYW4gdXAgbWFya2Rvd24gY29kZSBibG9jayBpZiBwcmVzZW50IChHZW1pbmkgd2l0aCByZXNwb25zZVNjaGVtYSBvZnRlbiBvbWl0cyB0aGlzLCBidXQgZ29vZCB0byBrZWVwKVxuICAgIGlmIChyYXcuc3RhcnRzV2l0aCgnYGBganNvbicpKSByYXcgPSByYXcuc2xpY2UoNywgLTMpLnRyaW0oKTtcbiAgICBlbHNlIGlmIChyYXcuc3RhcnRzV2l0aCgnYGBgJykpIHJhdyA9IHJhdy5zbGljZSgzLCAtMykudHJpbSgpO1xuXG4gICAgLy8gUmVwbGFjZSBcIm51bGxcIiBzdHJpbmdzIHdpdGggYWN0dWFsIG51bGwgdmFsdWVzIGZvciBKU09OIHBhcnNpbmcsIGlmIEdlbWluaSBvdXRwdXRzIHRoZW0gYXMgc3RyaW5nc1xuICAgIGNvbnN0IGNsZWFuSnNvbiA9IHJhdy5yZXBsYWNlKC86IFwibnVsbFwiL2csIFwiOiBudWxsXCIpO1xuXG4gICAgbGV0IHBhcnNlZERhdGE6IFBhcnNlZFRyaXBEZXRhaWxzO1xuICAgIHRyeSB7XG4gICAgICBwYXJzZWREYXRhID0gSlNPTi5wYXJzZShjbGVhbkpzb24pO1xuICAgIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gcGFyc2UgR2VtaW5pJ3MgSlNPTiByZXNwb25zZTpcIiwgcGFyc2VFcnJvciwgXCJSYXc6XCIsIGNsZWFuSnNvbik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpbnRlbnQ6ICdlcnJvcicsXG4gICAgICAgIG1lc3NhZ2U6ICdOTFAgc2VydmljZSByZXR1cm5lZCBtYWxmb3JtZWQgSlNPTi4gUGxlYXNlIHRyeSBhZ2Fpbi4nLFxuICAgICAgICBmcm9tOiBudWxsLCB0bzogbnVsbCwgZGF0ZTogbnVsbCwgYnVkZ2V0OiBudWxsLCBtb2RlOiBudWxsLCBncm91cFNpemU6IG51bGxcbiAgICAgIH07XG4gICAgfVxuXG5cbiAgICAvLyBFbnN1cmUgbnVtZXJpYyBmaWVsZHMgYXJlIGNvcnJlY3RseSBwYXJzZWQgaWYgdGhleSBjb21lIGFzIHN0cmluZ3MgKEdlbWluaSdzIHJlc3BvbnNlU2NoZW1hIGhlbHBzLCBidXQgZGVmZW5zaXZlKVxuICAgIGlmICh0eXBlb2YgcGFyc2VkRGF0YS5ncm91cFNpemUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHBhcnNlZERhdGEuZ3JvdXBTaXplID0gcGFyc2VJbnQocGFyc2VkRGF0YS5ncm91cFNpemUsIDEwKTtcbiAgICAgICAgaWYgKGlzTmFOKHBhcnNlZERhdGEuZ3JvdXBTaXplKSkgcGFyc2VkRGF0YS5ncm91cFNpemUgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIEVuc3VyZSBhbGwgb3B0aW9uYWwgZmllbGRzIGFyZSBleHBsaWNpdGx5IG51bGwgaWYgdGhleSBhcmUgdW5kZWZpbmVkIGluIHRoZSBwYXJzZWQgZGF0YVxuICAgIC8vIFRoaXMgbWFrZXMgdGhlIFBhcnNlZFRyaXBEZXRhaWxzIG9iamVjdCBwcmVkaWN0YWJsZSBmb3IgdGhlIHJlc3Qgb2YgdGhlIGFwcGxpY2F0aW9uLlxuICAgIHBhcnNlZERhdGEuZnJvbSA9IHBhcnNlZERhdGEuZnJvbSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHBhcnNlZERhdGEuZnJvbTtcbiAgICBwYXJzZWREYXRhLnRvID0gcGFyc2VkRGF0YS50byA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHBhcnNlZERhdGEudG87XG4gICAgcGFyc2VkRGF0YS5kYXRlID0gcGFyc2VkRGF0YS5kYXRlID09PSB1bmRlZmluZWQgPyBudWxsIDogcGFyc2VkRGF0YS5kYXRlO1xuICAgIHBhcnNlZERhdGEuYnVkZ2V0ID0gcGFyc2VkRGF0YS5idWRnZXQgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBwYXJzZWREYXRhLmJ1ZGdldDtcbiAgICBwYXJzZWREYXRhLm1vZGUgPSBwYXJzZWREYXRhLm1vZGUgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBwYXJzZWREYXRhLm1vZGU7XG4gICAgcGFyc2VkRGF0YS5ncm91cFNpemUgPSBwYXJzZWREYXRhLmdyb3VwU2l6ZSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHBhcnNlZERhdGEuZ3JvdXBTaXplO1xuICAgIHBhcnNlZERhdGEubWVzc2FnZSA9IHBhcnNlZERhdGEubWVzc2FnZSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHBhcnNlZERhdGEubWVzc2FnZTsgLy8gRW5zdXJlIG1lc3NhZ2UgaXMgbnVsbCBpZiB1bmRlZmluZWRcblxuICAgIC8vIERlZmVuc2l2ZSBjaGVjazogZW5zdXJlIGludGVudCBpcyBhbHdheXMgdmFsaWQgb3IgZGVmYXVsdHMgdG8gJ3Vua25vd24nXG4gICAgY29uc3QgdmFsaWRJbnRlbnRzID0gW1wiYm9va190cmlwXCIsIFwiZGlzcGxheV90cmlwXCIsIFwiY2FuY2VsX3RyaXBcIiwgXCJncmVldFwiLCBcImVycm9yXCIsIFwidW5rbm93blwiXTtcbiAgICBpZiAoIXBhcnNlZERhdGEuaW50ZW50IHx8ICF2YWxpZEludGVudHMuaW5jbHVkZXMocGFyc2VkRGF0YS5pbnRlbnQpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgTkxQIHJldHVybmVkIGFuIGludmFsaWQgb3IgbWlzc2luZyBpbnRlbnQ6IFwiJHtwYXJzZWREYXRhLmludGVudH1cIi4gRGVmYXVsdGluZyB0byAndW5rbm93bicuYCk7XG4gICAgICAgIHBhcnNlZERhdGEuaW50ZW50ID0gJ3Vua25vd24nO1xuICAgICAgICBwYXJzZWREYXRhLm1lc3NhZ2UgPSBwYXJzZWREYXRhLm1lc3NhZ2UgfHwgJ0kgY291bGQgbm90IGRldGVybWluZSB5b3VyIGludGVudC4gQ2FuIHlvdSBwbGVhc2UgcmVwaHJhc2U/JztcbiAgICB9XG5cblxuICAgIGNvbnNvbGUubG9nKCfinIUgTkxQIHBhcnNlIHN1Y2Nlc3NmdWw6JywgcGFyc2VkRGF0YSk7XG4gICAgcmV0dXJuIHBhcnNlZERhdGE7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgTkxQIHBhcnNlIGZhaWxlZDonLCBlcnJvcik7XG4gICAgLy8gUmV0dXJuIGFuICdlcnJvcicgaW50ZW50IHdpdGggdGhlIGVycm9yIG1lc3NhZ2UgYW5kIGFsbCBmaWVsZHMgZXhwbGljaXRseSBudWxsXG4gICAgcmV0dXJuIHtcbiAgICAgIGludGVudDogJ2Vycm9yJyxcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfHwgJ0FuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQgZHVyaW5nIE5MUCBwYXJzaW5nLicsXG4gICAgICBmcm9tOiBudWxsLCB0bzogbnVsbCwgZGF0ZTogbnVsbCwgYnVkZ2V0OiBudWxsLCBtb2RlOiBudWxsLCBncm91cFNpemU6IG51bGxcbiAgICB9O1xuICB9XG59Il0sIm5hbWVzIjpbInBhcnNlVHJpcERldGFpbHMiLCJtZXNzYWdlIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIkdFTUlOSV9BUElfS0VZIiwiY29uc29sZSIsImVycm9yIiwiaW50ZW50IiwiZnJvbSIsInRvIiwiZGF0ZSIsImJ1ZGdldCIsIm1vZGUiLCJncm91cFNpemUiLCJhcGlVcmwiLCJzeXN0ZW1Qcm9tcHQiLCJwYXlsb2FkIiwiY29udGVudHMiLCJyb2xlIiwicGFydHMiLCJ0ZXh0IiwiZ2VuZXJhdGlvbkNvbmZpZyIsInJlc3BvbnNlTWltZVR5cGUiLCJyZXNwb25zZVNjaGVtYSIsInR5cGUiLCJwcm9wZXJ0aWVzIiwibnVsbGFibGUiLCJlbnVtIiwicmVxdWlyZWQiLCJyZXMiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm9rIiwiZXJyVGV4dCIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJzdWJzdHJpbmciLCJjb250ZW50VHlwZSIsImdldCIsImluY2x1ZGVzIiwicmF3VGV4dCIsInJlc3VsdCIsImpzb24iLCJwYXJ0IiwiY2FuZGlkYXRlcyIsImNvbnRlbnQiLCJ3YXJuIiwicmF3IiwidHJpbSIsInN0YXJ0c1dpdGgiLCJzbGljZSIsImNsZWFuSnNvbiIsInJlcGxhY2UiLCJwYXJzZWREYXRhIiwicGFyc2UiLCJwYXJzZUVycm9yIiwicGFyc2VJbnQiLCJpc05hTiIsInVuZGVmaW5lZCIsInZhbGlkSW50ZW50cyIsImxvZyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/nlpParser.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ftrip%2Froute&page=%2Fapi%2Ftrip%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftrip%2Froute.ts&appDir=%2FUsers%2Fsurajrawat%2FDownloads%2FTripy%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsurajrawat%2FDownloads%2FTripy&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=export&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();