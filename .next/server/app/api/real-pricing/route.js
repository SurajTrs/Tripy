(()=>{var e={};e.id=843,e.ids=[173,841,843,935],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},5511:e=>{"use strict";e.exports=require("crypto")},9021:e=>{"use strict";e.exports=require("fs")},1820:e=>{"use strict";e.exports=require("os")},3873:e=>{"use strict";e.exports=require("path")},7292:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>w,routeModule:()=>g,serverHooks:()=>$,workAsyncStorage:()=>f,workUnitAsyncStorage:()=>M});var a={};r.r(a),r.d(a,{POST:()=>m});var o=r(2706),i=r(8203),n=r(5994),s=r(9187),l=r(6529),d=r(9841),u=r(5173),c=r(9909),h=r(3935);async function p(e){try{let t={transport:null,total:0},r=[];switch(e.transportType){case"flight":r=await (0,l.o)({origin:e.origin,destination:e.destination,departureDate:e.departureDate,adults:e.adults});break;case"train":r=await (0,d.searchTrains)({origin:e.origin,destination:e.destination,departureDate:e.departureDate,passengers:e.adults});break;case"bus":r=await (0,u.searchBuses)({origin:e.origin,destination:e.destination,departureDate:e.departureDate,passengers:e.adults})}if(r.length>0&&(t.transport=r[0],t.total+=t.transport.price*e.adults),e.returnDate){let r=[];switch(e.transportType){case"flight":r=await (0,l.o)({origin:e.destination,destination:e.origin,departureDate:e.returnDate,adults:e.adults});break;case"train":r=await (0,d.searchTrains)({origin:e.destination,destination:e.origin,departureDate:e.returnDate,passengers:e.adults});break;case"bus":r=await (0,u.searchBuses)({origin:e.destination,destination:e.origin,departureDate:e.returnDate,passengers:e.adults})}r.length>0&&(t.returnTransport=r[0],t.total+=t.returnTransport.price*e.adults)}if(e.hotelNeeded)try{let r=await (0,c.searchHotels)({destination:e.destination,checkInDate:e.departureDate,checkOutDate:e.returnDate||new Date(new Date(e.departureDate).getTime()+864e5).toISOString().split("T")[0],adults:e.adults});r.length>0&&(t.hotel=r[0],t.total+=t.hotel.price*e.adults)}catch(e){console.error("Error fetching hotel data:",e)}if(e.cabToStationNeeded)try{let r={lat:28.6304,lng:77.2177,name:e.origin+" Station"},a=await (0,h.W)({origin:{lat:28.6139,lng:77.209,name:"Home"},destination:r,passengers:e.adults});if(a.length>0){let r={...a[0],name:`Cab to ${e.origin} Station`,details:`${a[0].cabType} | ${a[0].estimatedTime} min`};t.cabToStation=r,t.total+=t.cabToStation.price}}catch(e){console.error("Error fetching cab to station data:",e)}if(e.cabToHotelNeeded)try{let r={lat:28.6304,lng:77.2177,name:e.destination+" Station"},a=await (0,h.W)({origin:r,destination:{lat:28.6139,lng:77.209,name:"Hotel"},passengers:e.adults});if(a.length>0){let r={...a[0],name:`Cab to Hotel in ${e.destination}`,details:`${a[0].cabType} | ${a[0].estimatedTime} min`};t.cabToHotel=r,t.total+=t.cabToHotel.price}}catch(e){console.error("Error fetching cab to hotel data:",e)}return t}catch(e){throw console.error("Error in getRealTimePricing:",e),Error("Failed to get real-time pricing")}}async function m(e){try{let{transportType:t,origin:r,destination:a,departureDate:o,returnDate:i,adults:n,hotelNeeded:l,cabToStationNeeded:d,cabToHotelNeeded:u}=await e.json();if(!t||!r||!a||!o||!n)return s.NextResponse.json({success:!1,message:"Missing required fields"},{status:400});let c=await p({transportType:t,origin:r,destination:a,departureDate:o,returnDate:i,adults:n,hotelNeeded:l,cabToStationNeeded:d,cabToHotelNeeded:u});return s.NextResponse.json({success:!0,data:c})}catch(e){return console.error("Error in real-pricing API:",e),s.NextResponse.json({success:!1,message:e.message||"Failed to get real-time pricing"},{status:500})}}let g=new o.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/real-pricing/route",pathname:"/api/real-pricing",filename:"route",bundlePath:"app/api/real-pricing/route"},resolvedPagePath:"/Users/surajrawat/Downloads/Tripy/app/api/real-pricing/route.ts",nextConfigOutput:"",userland:a}),{workAsyncStorage:f,workUnitAsyncStorage:M,serverHooks:$}=g;function w(){return(0,n.patchFetch)({workAsyncStorage:f,workUnitAsyncStorage:M})}},6487:()=>{},8335:()=>{},5173:(e,t,r)=>{"use strict";async function a(e){if(!process.env.RAPIDAPI_KEY)throw Error("Bus API credentials are not configured.");try{return function(e,t,r,a){let o=[],i=["RedBus Express","AbhiBus Travels","eTravelSmart","Travelyaari","TicketGoose","KSRTC","MSRTC","GSRTC","TNSTC","UPSRTC"],n=["Volvo A/C Sleeper","Mercedes Multi-Axle","Volvo A/C Seater","Non A/C Sleeper","Non A/C Seater","Deluxe","Super Deluxe","Ultra Deluxe","Semi Sleeper"],s=["WiFi","Charging Point","Water Bottle","Blanket","Reading Light","Snacks","TV","Emergency Exit","CCTV"],l=5+Math.floor(6*Math.random());for(let a=0;a<l;a++){let l=6+Math.floor(18*Math.random()),d=Math.floor(60*Math.random()),u=`${l.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`,c=3+Math.floor(10*Math.random()),h=Math.floor(60*Math.random()),p=(l+c)%24,m=(d+h)%60,g=`${p.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}`,f=500+Math.floor(2e3*Math.random()),M=i[Math.floor(Math.random()*i.length)],$=n[Math.floor(Math.random()*n.length)],w=2+Math.floor(4*Math.random()),A=[];for(let e=0;e<w;e++){let e=s[Math.floor(Math.random()*s.length)];A.includes(e)||A.push(e)}let b=5+Math.floor(36*Math.random()),S=(3+2*Math.random()).toFixed(1);o.push({id:`BUS-${Date.now()}-${a}`,operator:M,busType:$,departureTime:u,arrivalTime:g,duration:`${c}h ${h}m`,price:f,currency:"INR",departureCity:e,arrivalCity:t,departureDate:r,availableSeats:b,amenities:A,rating:parseFloat(S),deeplink:`https://example.com/book-bus/${M.toLowerCase().replace(/\s+/g,"-")}/${r}/${e.toLowerCase()}-${t.toLowerCase()}`})}return o.sort((e,t)=>e.price-t.price)}(e.origin,e.destination,e.departureDate,e.passengers)}catch(e){throw console.error("Bus API Error:",e),Error(`Failed to fetch bus data: ${e.message}`)}}async function o(e,t,r,a=!1){let i="string"==typeof e?e:e.id;if(await new Promise(e=>setTimeout(e,1500+1e3*Math.random())),!(Math.random()>.1))throw Error(`${a?"Return bus":"Bus"} booking failed - no seats available`);return{type:"bus",isReturn:a,bookingId:`BUS-${a?"RET-":""}${Date.now()}-${Math.random().toString(36).substring(2,8).toUpperCase()}`,pnr:`PNR${Math.random().toString(36).substring(2,8).toUpperCase()}`,status:"confirmed",busId:i,passengers:r,totalAmount:"object"==typeof e?e.price*r:0}}r.d(t,{i:()=>o,searchBuses:()=>a})},3935:(e,t,r)=>{"use strict";async function a(e,t,r,a,o){try{let i=await fetch(`https://api.uber.com/v1.2/estimates/price?start_latitude=${t}&start_longitude=${r}&end_latitude=${a}&end_longitude=${o}`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!i.ok){let e=await i.json();throw Error(e.message||"Failed to fetch Uber estimates")}return await i.json()}catch(e){throw console.error("Uber estimate error:",e),e}}async function o(e){try{let t=process.env.UBER_CLIENT_ID,r=process.env.UBER_CLIENT_SECRET;if(t&&r)try{let t=await a("mock_access_token",e.origin.lat,e.origin.lng,e.destination.lat,e.destination.lng);if(t&&t.prices&&t.prices.length>0)return t.prices.map(t=>({id:`UBER-${t.product_id}`,provider:"Uber",cabType:t.display_name,price:t.estimate.split("-")[0].replace(/\D/g,""),currency:"INR",estimatedTime:Math.round(t.duration/60).toString(),distance:t.distance.toFixed(1),deeplink:`https://m.uber.com/ul/?action=setPickup&pickup[latitude]=${e.origin.lat}&pickup[longitude]=${e.origin.lng}&pickup[nickname]=${encodeURIComponent(e.origin.name)}&dropoff[latitude]=${e.destination.lat}&dropoff[longitude]=${e.destination.lng}&dropoff[nickname]=${encodeURIComponent(e.destination.name)}`}))}catch(e){console.error("Error fetching Uber estimates:",e)}return function(e,t,r){let a=[],o=["Uber","Ola","Meru","BluSmart","Rapido"],i={Uber:["UberGo","Premier","UberXL","UberAuto","UberMoto"],Ola:["Mini","Sedan","Prime","SUV","Auto"],Meru:["Hatchback","Sedan","SUV"],BluSmart:["Electric Sedan","Electric SUV"],Rapido:["Bike","Auto"]},n=(5+25*Math.random()).toFixed(1),s=5+Math.floor(4*Math.random());for(let r=0;r<s;r++){let s=o[Math.floor(Math.random()*o.length)],l=i[s][Math.floor(Math.random()*i[s].length)],d=Math.round(parseFloat(n)*(20+15*Math.random())*10)/10;l.includes("SUV")||l.includes("XL")?d*=1.5:l.includes("Premier")||l.includes("Sedan")?d*=1.2:(l.includes("Auto")||l.includes("Bike")||l.includes("Moto"))&&(d*=.7);let u=10*Math.round(d/10),c=Math.round(2*parseFloat(n));a.push({id:`${s.toUpperCase()}-${Date.now()}-${r}`,provider:s,cabType:l,price:u,currency:"INR",estimatedTime:c.toString(),distance:n,deeplink:`https://example.com/book-cab/${s.toLowerCase()}/${e.toLowerCase()}-${t.toLowerCase()}`})}return a.sort((e,t)=>e.price-t.price)}(e.origin.name,e.destination.name,e.passengers)}catch(e){throw console.error("Cab API Error:",e),Error(`Failed to fetch cab data: ${e.message}`)}}async function i(e,t,r,a,o){if(await new Promise(e=>setTimeout(e,1e3+1e3*Math.random())),!(Math.random()>.15))throw Error("Cab booking failed - no drivers available");let i=["Rahul","Amit","Suresh","Rajesh","Vikram","Sanjay","Anil","Dinesh"],n=i[Math.floor(Math.random()*i.length)]+" "+String.fromCharCode(65+Math.floor(26*Math.random()))+".",s=["Swift Dzire","Wagon R","Alto","Innova","Ertiga","i10","i20","Verna"],l=s[Math.floor(Math.random()*s.length)],d=`${["DL","MH","KA","TN","UP","HR"][Math.floor(6*Math.random())]}${Math.floor(100*Math.random())}${String.fromCharCode(65+Math.floor(26*Math.random()))}${Math.floor(1e4*Math.random())}`;return{bookingId:`CAB-${Date.now()}-${Math.random().toString(36).substring(2,8).toUpperCase()}`,status:"confirmed",cabId:e,driverDetails:{name:n,phone:`+91${Math.floor(9e9*Math.random())+1e9}`,vehicleNumber:d,vehicleType:l},pickupTime:`${Math.floor(10*Math.random())+2} mins`,fare:Math.floor(500*Math.random())+200,currency:"INR"}}r.d(t,{bookCab:()=>i,W:()=>o})},6529:(e,t,r)=>{"use strict";async function a(e){let t=process.env.AVIATIONSTACK_API_KEY;if(!t)throw Error("Flight API credentials are not configured.");try{let r=o(e.origin),a=o(e.destination);if(!r||!a)throw Error("Could not find airport code for the specified city.");let i=`https://api.aviationstack.com/v1/flights?access_key=${t}&dep_iata=${r}&arr_iata=${a}`,n=await fetch(i),s=await n.json();if(!n.ok||!s.data)throw console.error("AviationStack API Error:",s.error?.info),Error(s.error?.info||"Failed to fetch flight data.");return s.data.slice(0,5).map((e,t)=>{let o="3h 15m";if(e.departure?.scheduled&&e.arrival?.scheduled){let t=new Date(e.departure.scheduled),r=new Date(e.arrival.scheduled).getTime()-t.getTime(),a=Math.floor(r/36e5),i=Math.floor(r%36e5/6e4);o=`${a}h ${i}m`}let i={"DEL-BOM":1.2,"DEL-BLR":1.4,"DEL-MAA":1.6,"DEL-CCU":1.1,"BOM-DEL":1.2,"BOM-BLR":1.1,"BOM-MAA":1.3,"BOM-CCU":1.5,"BLR-DEL":1.4,"BLR-BOM":1.1,"BLR-MAA":1,"BLR-CCU":1.4,"MAA-DEL":1.6,"MAA-BOM":1.3,"MAA-BLR":1,"MAA-CCU":1.5,"CCU-DEL":1.1,"CCU-BOM":1.5,"CCU-BLR":1.4,"CCU-MAA":1.5}[`${r}-${a}`]||1.2,n={"Air India":1.1,IndiGo:.9,SpiceJet:.85,Vistara:1,"AirAsia India":.8,GoAir:.9,"Jet Airways":1.2,"Kingfisher Airlines":1.1}[e.airline?.name]||1,s=Math.floor(4500*i*n*(.8+.4*Math.random()));return{id:e.flight?.iata||`flight_${t}`,airline:e.airline?.name||"Unknown Airline",flightNumber:e.flight?.number||"N/A",departureAirportIata:e.departure?.iata,arrivalAirportIata:e.arrival?.iata,departureTime:e.departure?.scheduled?new Date(e.departure.scheduled).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"N/A",arrivalTime:e.arrival?.scheduled?new Date(e.arrival.scheduled).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"N/A",duration:o,price:s,currency:"INR",deeplink:`https://www.google.com/flights?q=flights+from+${r}+to+${a}`,stops:e.departure?.delay!=null?1:0}})}catch(e){throw console.error("Error in searchFlights:",e),e}}function o(e){return({delhi:"DEL",mumbai:"BOM",bengaluru:"BLR",chennai:"MAA",kolkata:"CCU",hyderabad:"HYD",pune:"PNQ",ahmedabad:"AMD",jaipur:"JAI",lucknow:"LKO"})[e.toLowerCase()]||null}r.d(t,{o:()=>a})},9841:(e,t,r)=>{"use strict";async function a(e){if(!process.env.RAPIDAPI_KEY)throw Error("Train API credentials are not configured.");try{return function(e,t,r,a){let o=[`${t} Express`,`${e} - ${t} Shatabdi`,`${e} - ${t} Rajdhani`,`${e} - ${t} Duronto`,`${e} - ${t} Superfast`],i=["Superfast","Express","Passenger","Shatabdi","Rajdhani","Duronto"],n=["1A","2A","3A","SL","CC","EC"],s=new Date(r),l=Math.floor(3*Math.random())+3,d=[];for(let r=0;r<l;r++){let r=6+Math.floor(16*Math.random()),a=Math.floor(60*Math.random()),l=new Date(s);l.setHours(r,a,0,0);let u=3+Math.floor(9*Math.random()),c=Math.floor(60*Math.random()),h=new Date(l);h.setHours(h.getHours()+u,h.getMinutes()+c);let p=800+Math.floor(2200*Math.random()),m=`${1e4+Math.floor(9e4*Math.random())}`,g=o[Math.floor(Math.random()*o.length)],f=i[Math.floor(Math.random()*i.length)],M=n[Math.floor(Math.random()*n.length)],$=10+Math.floor(190*Math.random());d.push({id:`TRAIN-${m}`,trainNumber:m,trainName:g,trainType:f,departureTime:l.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),arrivalTime:h.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),duration:`${u}h ${c}m`,price:p,currency:"INR",departureCity:e,arrivalCity:t,departureDate:s.toISOString().split("T")[0],availableSeats:$,trainClass:M,platform:`${1+Math.floor(10*Math.random())}`,deeplink:"https://www.irctc.co.in/nget/train-search"})}return d}(e.origin,e.destination,e.departureDate,e.passengers)}catch(e){throw console.error("Train API Error:",e),Error(`Failed to fetch train data: ${e.message}`)}}async function o(e,t,r,a=!1){let i="string"==typeof e?e:e.id;if(await new Promise(e=>setTimeout(e,1500+1e3*Math.random())),!(Math.random()>.1))throw Error(`${a?"Return train":"Train"} booking failed - no seats available`);return{type:"train",isReturn:a,bookingId:`TRAIN-${a?"RET-":""}${Date.now()}-${Math.random().toString(36).substring(2,8).toUpperCase()}`,pnr:`${Math.random().toString(36).substring(2,10).toUpperCase()}`,status:"confirmed",trainId:i,passengers:r,totalAmount:"object"==typeof e?e.price*r:0}}r.d(t,{O:()=>o,searchTrains:()=>a})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[994,452,909],()=>r(7292));module.exports=a})();