(()=>{var e={};e.id=596,e.ids=[596,854],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},9646:e=>{"use strict";e.exports=require("child_process")},5511:e=>{"use strict";e.exports=require("crypto")},4735:e=>{"use strict";e.exports=require("events")},1630:e=>{"use strict";e.exports=require("http")},5591:e=>{"use strict";e.exports=require("https")},8354:e=>{"use strict";e.exports=require("util")},6064:(e,s,r)=>{"use strict";r.r(s),r.d(s,{patchFetch:()=>m,routeModule:()=>p,serverHooks:()=>x,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>l});var t={};r.r(t),r.d(t,{GET:()=>c});var i=r(2706),o=r(8203),n=r(5994),a=r(9187),u=r(1854);async function c(e){try{let{searchParams:s}=new URL(e.url),r=s.get("session_id");if(!r)return a.NextResponse.json({success:!1,message:"Session ID is required"},{status:400});let t=await u.stripe.checkout.sessions.retrieve(r,{expand:["line_items","customer_details"]});if(!t)return a.NextResponse.json({success:!1,message:"Session not found"},{status:404});return a.NextResponse.json({success:!0,session:t})}catch(e){return console.error("Error retrieving Stripe session:",e),a.NextResponse.json({success:!1,message:e.message||"Failed to retrieve session details"},{status:500})}}let p=new i.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/stripe/session/route",pathname:"/api/stripe/session",filename:"route",bundlePath:"app/api/stripe/session/route"},resolvedPagePath:"/Users/surajrawat/Downloads/Tripy/app/api/stripe/session/route.ts",nextConfigOutput:"",userland:t}),{workAsyncStorage:d,workUnitAsyncStorage:l,serverHooks:x}=p;function m(){return(0,n.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:l})}},6487:()=>{},8335:()=>{},1854:(e,s,r)=>{"use strict";r.d(s,{fw:()=>n,stripe:()=>o}),r(9248);var t=r(9657);let i=process.env.STRIPE_SECRET_KEY;i||console.error("Missing STRIPE_SECRET_KEY environment variable");let o=i?new t.A(i,{apiVersion:"2023-10-16"}):null;async function n({lineItems:e,successUrl:s,cancelUrl:r,metadata:t={}}){if(!o)throw Error("Stripe is not initialized. Check your environment variables.");try{return await o.checkout.sessions.create({payment_method_types:["card"],line_items:e,mode:"payment",success_url:s,cancel_url:r,metadata:t})}catch(e){throw console.error("Error creating checkout session:",e),Error(`Failed to create checkout session: ${e.message}`)}}}};var s=require("../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[994,452,184],()=>r(6064));module.exports=t})();